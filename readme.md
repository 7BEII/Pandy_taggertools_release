Pandy AI 打标器 - 使用说明
---
https://github.com/7BEII/pandy_taggertools

Pandy AI 打标器是一个高效的数据集打标工具，专为 LoRA 和 Stable Diffusion 训练者设计。它提供 **Web 版本**和 **Python 桌面版本**两种选择，支持多图批量处理、AI 自动反推描述、以及图像编辑指令生成。

## 版本说明

### 🌐 Web 版本
基于 React + Tailwind CSS 的在线打标工具，无需安装，打开即用。

### 🖥️ Python 桌面版本
基于 Tkinter 的本地桌面应用，支持离线使用，功能完整，适合本地批量处理。

主要功能

1. 核心模式

🖼️ 图像模型反推 (Tagging Mode)

适用于通用的文生图数据集打标。

支持单图上传、批量上传、文件夹导入。

提供 AI 自动生成 Prompt、手动编辑、批量重命名、批量裁切等功能。

✂️ 图像编辑模型反推 (Editing Mode)

按钮更名：📂 导入文件夹 → 📂 导入数据集

新增两种导入模式：

1. 默认模式：
导入文件夹中所有图片和txt文件
按文件名顺序自动配对（每两张图片组成一对）
第1张为原图，第2张为目标图
自动匹配同名txt文件作为提示词

2. 规则匹配模式
可自定义原图后缀（默认：R）
可自定义目标图后缀（默认：T）
可选择TXT文件跟随原图还是目标图
只导入符合规则的成对图片
示例：001_R.png + 001_T.png + 001_T.txt

2. 批量操作工具

在右侧工具栏中，您可以对选中的图片进行批量操作：

全选 / 反选：快速管理大量素材。

批量重命名：按顺序格式化文件名（如 lora_001, lora_002...），导出时直接生效。

批量裁切：将图片等比例缩放至指定的最长边（默认 1024px），优化训练效率。

批量添加文本：支持在现有 Tag 的【句首】或【句尾】批量插入触发词（Trigger Word）或通用标签。

批量清空文本：一键清除选中图片的标注内容。

3. AI 反推与交互

智能反推：选中图片后点击“✨ 反推选中”，系统将调用配置好的多模态大模型（如 Qwen-VL）自动生成描述。

可视化编辑：

点击图片：进入放大预览模式，可查看详细尺寸、文件名，并进行单张 AI 反推。

点击卡片下半部分：选中/取消选中该图片。

多选支持：支持 Shift 连选（待实现）或逐个点击多选。

4. 数据集导出

一键打包：选中图片后，点击右上角的“下载选中”，系统会自动将图片（.jpg/.png）和对应的文本文件（.txt）打包为 ZIP 文件。

自动格式化：下载时会自动统一格式，确保文件名一一对应。

## 配置指南
API 设置
配置中心：

API Key 配置 → "保存全部"	apikey.json
图像反推模板 → "保存为文件"	{输入的名称}.json
图像编辑模板 → "保存为文件"	{输入的名称}.json
模板 → "更新模板"	更新当前选中的 .json 文件

选择渠道：默认为 SiliconFlow（硅基流动），也支持 OpenAI 兼容接口。
API Key：填入您的 API Key（本地存储，不会上传）。

配置文件

导出配置：将当前的 API Key、模型设置导出为 JSON 文件备份。

导入配置：在新设备或清除缓存后，一键恢复您的工作环境。

常见问题

Q: 图片加载失败？

A: 请确保图片格式为 JPG/PNG/WEBP，且单张大小不超过 10MB。

Q: API 无响应？

A: 请检查 API Key 余额或网络连接。大图片（>1536px）会自动压缩发送，无需手动处理。

---

## Python 桌面版本功能

### 1. 图片管理

📂 **导入方式**
- 单张添加：点击"📂 添加图片"选择单张或多张图片
- 文件夹导入：点击"📂 导入文件夹"递归扫描文件夹内所有图片（支持 JPG/PNG/WEBP）
- 自动读取：导入时自动检测同名 .txt 文件并加载已有标注

🖼️ **图片展示**
- 网格布局：4 列网格展示，支持滚动查看
- 缩略图预览：自动生成 180x180 缩略图
- 信息显示：显示图片分辨率、文件名、文本预览
- 状态标识：不同颜色标识处理状态（成功/失败/处理中）

### 2. AI 反推功能

✨ **批量反推**
- 选中多张图片后，点击"✨ 开始反推"进行批量处理
- 实时进度条显示处理进度
- 支持中途停止任务
- 自动重试机制（失败自动重试一次）

🔍 **单图反推**
- 点击图片进入详情窗口
- 查看大图预览（自动适应窗口大小）
- 在详情窗口中可单独进行 AI 反推
- 实时编辑和保存标注内容

⚙️ **模型配置**
- 支持多种多模态模型：
  - Qwen/Qwen2.5-VL-72B-Instruct（推荐，质量最佳）
  - Qwen/Qwen2.5-VL-7B-Instruct（速度快）
  - Qwen/Qwen2-VL-72B-Instruct
  - deepseek-ai/deepseek-vl-7b-chat
  - TeleAI/TeleMM
- 自定义系统提示词和用户提示词
- 支持 SiliconFlow 和 OpenAI 兼容接口
- 自动压缩大图（>1536px）以适配 API

### 3. 批量操作工具

✅ **选择管理**
- 全选：一键选中所有图片
- 反选：快速反转选择状态
- 删除选中：移除不需要的图片（仅从列表中移除，不删除源文件）

📝 **批量文本操作**
- 批量添加文本：为选中图片批量添加触发词或标签（默认添加到句首）
- 自动去重：避免重复添加相同文本

✂️ **批量裁切**
- 设置最长边大小（默认 1024px）
- 等比例缩放，保持图片质量
- 导出时自动应用裁切设置

🏷️ **批量重命名**
- 自定义文件名前缀（如 `lora_data`）
- 自动编号（001, 002, 003...）
- 仅修改导出名称，不改变源文件

### 4. 编辑与预览

🔍 **详情编辑窗口**
- 点击图片卡片进入详情模式
- 左侧显示大图预览（最大 500x550）
- 右侧文本编辑区域
- 支持手动编辑标注内容
- 单图 AI 反推功能
- 保存后自动更新主界面

### 5. 数据集导出

⬇️ **ZIP 打包导出**
- 选中需要导出的图片
- 点击"⬇️ 导出数据集"
- 自动打包为 ZIP 文件，包含：
  - 图片文件（支持 JPG/PNG/WEBP）
  - 对应的 .txt 标注文件
  - 文件名一一对应
- 自动应用批量重命名设置
- 自动应用批量裁切设置（如已设置）

### 6. 配置管理

💾 **本地配置**
- 配置保存在 `config.json` 文件中
- 自动保存 API Key、Base URL、模型选择
- 下次启动自动加载配置
- 点击"保存配置"按钮手动保存

🔐 **API 配置**
- API Key：支持 SiliconFlow 或其他 OpenAI 兼容接口
- Base URL：可自定义 API 地址（默认：https://api.siliconflow.cn/v1）
- 模型选择：下拉菜单快速切换模型
- 提示词自定义：可修改系统提示词和用户提示词

### 7. 界面特性

🎨 **现代化 UI**
- 清晰的侧边栏配置区
- 顶部工具栏快速操作
- 底部状态栏实时反馈
- 响应式网格布局
- 支持鼠标滚轮滚动

📊 **状态反馈**
- 进度条显示批量处理进度
- 状态栏显示当前操作状态
- 图片卡片颜色标识处理结果
- 错误提示和成功确认

---

## 使用建议

### Web 版本 vs Python 版本

**选择 Web 版本，如果您：**
- 需要跨平台使用（无需安装 Python）
- 偏好在线协作和云端存储
- 需要图像编辑模式（成对图片处理）

**选择 Python 版本，如果您：**
- 需要离线使用
- 处理大量本地图片
- 需要更精细的批量操作控制
- 偏好桌面应用体验

---

Powered by React, Tailwind CSS & SiliconFlow API (Web) | Python Tkinter (Desktop)