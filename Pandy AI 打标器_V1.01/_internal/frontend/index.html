<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pandy AI Â∑•ÂÖ∑ÁÆ±</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body :class="theme === 'dark' ? 'dark bg-gray-900' : (theme === 'blue' ? 'blue bg-blue-950' : 'bg-gray-50')" x-data="taggerApp()" x-init="init()">
    <!-- Êú™ÊøÄÊ¥ªÈÅÆÁΩ©ÔºöÂú®Êú™ÊøÄÊ¥ªÁä∂ÊÄÅ‰∏ãÈòªÊ≠¢‰∏ªÁïåÈù¢Êìç‰ΩúÔºåÁî®Êà∑ÂèØÁÇπÂáªËøõÂÖ•ÊøÄÊ¥ªËÆæÁΩÆ -->
    <div x-show="!isLicensed" x-cloak class="fixed inset-0 bg-white/80 z-30 flex items-center justify-center">
        <div class="max-w-md w-full p-6 bg-white rounded-lg shadow-lg text-center">
            <h3 class="text-lg font-medium mb-2">Êú™ÊøÄÊ¥ª</h3>
            <p class="text-sm text-gray-600 mb-4">ËØ∑ÂÖàÂÆåÊàêÊøÄÊ¥ªÔºöÁÇπÂáª‰∏ãÈù¢ÊåâÈíÆËé∑ÂèñÊú¨Êú∫ÊøÄÊ¥ªÁ†ÅÂπ∂Âú®ÊøÄÊ¥ªÈ°µÂ°´ÂÜôÊøÄÊ¥ªÁ†Å„ÄÇÊøÄÊ¥ªÊàêÂäüÂêéÊâÄÊúâÂäüËÉΩÂ∞ÜËß£ÈîÅ„ÄÇ</p>
            <div class="flex justify-center space-x-3">
                <button @click="showSettingsModal = true; settingsTab = 'license'" class="px-4 py-2 bg-violet-600 text-white rounded-lg">ÂâçÂæÄÊøÄÊ¥ª</button>
            </div>
        </div>
    </div>
    
    <!-- ‰∏ªÂÆπÂô® -->
    <div class="flex h-screen overflow-hidden">
        
        <!-- Â∑¶‰æßËæπÊ†èÔºàËÆ≠ÁªÉÂàÜÊûêÂô®ÂíåAIÂØπËØùÊ®°Âºè‰∏ãÈöêËóèÔºâ -->
        <div x-show="modelMode !== 'analyzer'" :class="theme === 'dark' ? 'bg-gray-800 border-gray-700' : (theme === 'blue' ? 'bg-blue-900 border-blue-800' : 'bg-white border-gray-200')" class="w-80 border-r flex flex-col">
            <!-- Logo Âå∫Âüü -->
            <div :class="theme === 'dark' ? 'border-gray-700' : 'border-gray-200'" class="p-6 border-b">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-purple-500 to-blue-500 rounded-lg flex items-center justify-center text-white text-xl font-bold">
                        üêº
                    </div>
                    <div>
                        <h1 :class="theme === 'dark' ? 'text-gray-100' : 'text-gray-800'" class="text-lg font-bold">Pandy AI ÊâìÊ†áÂô®</h1>
                        <p :class="theme === 'dark' ? 'text-gray-400' : 'text-gray-500'" class="text-xs">MULTI-PROVIDER SUPPORT</p>
                    </div>
                </div>
            </div>

            <!-- ÈÖçÁΩÆÂå∫Âüü -->
            <div class="flex-1 overflow-y-auto p-6 space-y-4">
                
                <!-- APIÈÖçÁΩÆÂå∫Âùó -->
                <div :class="theme === 'dark' ? 'bg-gray-750 border-gray-600' : 'bg-gray-50 border-gray-200'" class="p-4 rounded-xl border space-y-4">
                    <!-- ÈÄâÊã©APIÊ∏†ÈÅì -->
                    <div>
                        <label :class="theme === 'dark' ? 'text-gray-300' : 'text-gray-700'" class="block text-sm font-medium mb-2">API Ê∏†ÈÅì</label>
                        <select x-model="apikeyConfig.current_provider" @change="onProviderChange()" :class="theme === 'dark' ? 'bg-gray-700 border-gray-600 text-gray-200' : 'bg-white border-gray-300 text-gray-900'" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <template x-for="(provider, key) in apikeyConfig.providers" :key="key">
                                <option :value="key" x-text="providerNames[key]"></option>
                            </template>
                        </select>
                    </div>

                    <!-- ÈÄâÊã©Ê®°Âûã -->
                    <div>
                        <label :class="theme === 'dark' ? 'text-gray-300' : 'text-gray-700'" class="block text-sm font-medium mb-2">ÈÄâÊã©Ê®°Âûã</label>
                        <select x-model="apikeyConfig.model" @change="saveApikeyConfig(true)" :class="theme === 'dark' ? 'bg-gray-700 border-gray-600 text-gray-200' : 'bg-white border-gray-300 text-gray-900'" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <template x-for="model in getCurrentProviderModels()" :key="model.id">
                                <option :value="model.id" x-text="model.name"></option>
                            </template>
                        </select>
                    </div>
                </div>

                <!-- ÊèêÁ§∫ËØçÊ®°ÊùøÈ¢ÑËÆæÂå∫ÂùóÔºà‰ªÖÂú®ÊñáÁîüÂõæÂèçÊé®ÂíåÂõæÂÉèÁºñËæëÊ®°ÂºèÊòæÁ§∫Ôºâ -->
                <div x-show="modelMode === 'tagging' || modelMode === 'editing'" x-transition :class="theme === 'dark' ? 'bg-gray-750 border-gray-600' : (theme === 'blue' ? 'bg-blue-900 border-blue-700' : 'bg-gradient-to-br from-purple-50 to-blue-50 border-purple-200')" class="p-4 rounded-xl border space-y-3">
                    <div class="flex items-center justify-between">
                        <h3 :class="theme === 'dark' ? 'text-gray-200' : (theme === 'blue' ? 'text-blue-100' : 'text-gray-800')" class="text-sm font-bold flex items-center space-x-2">
                            <span>‚ú®</span>
                            <span x-text="modelMode === 'tagging' ? 'ÊñáÁîüÂõæÂèçÊé®Ê®°Êùø' : 'ÂõæÂÉèÁºñËæëÊ®°Êùø'"></span>
                        </h3>
                        <button @click="showPromptTemplateManager = true" :class="theme === 'dark' ? 'text-purple-400 hover:text-purple-300' : (theme === 'blue' ? 'text-blue-300 hover:text-blue-200' : 'text-purple-600 hover:text-purple-700')" class="text-xs font-medium">
                            ÁÆ°ÁêÜ
                        </button>
                    </div>

                    <!-- Ê®°ÊùøÈÄâÊã©‰∏ãÊãâ -->
                    <div>
                        <select 
                            :value="modelMode === 'tagging' ? selectedTaggingTemplateId : selectedEditingTemplateId"
                            @change="onTemplateSelectChange($event.target.value)"
                            :class="theme === 'dark' ? 'bg-gray-700 border-gray-600 text-gray-200' : (theme === 'blue' ? 'bg-blue-800 border-blue-600 text-blue-100' : 'bg-white border-gray-300 text-gray-900')"
                            class="w-full px-3 py-2 text-sm border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <template x-for="tpl in getCurrentModeTemplates()" :key="tpl.id">
                                <option :value="tpl.id" x-text="tpl.name"></option>
                            </template>
                        </select>
                    </div>

                    <!-- ÂΩìÂâçÊ®°ÊùøÈ¢ÑËßàÔºàÂèØÁºñËæëÔºâ -->
                    <div class="space-y-2">
                        <!-- Á≥ªÁªüÊèêÁ§∫ËØç -->
                        <div :class="theme === 'dark' ? 'bg-gray-700 border-gray-600' : (theme === 'blue' ? 'bg-blue-800 border-blue-600' : 'bg-white border-gray-200')" class="p-3 rounded-lg border">
                            <div :class="theme === 'dark' ? 'text-gray-400' : (theme === 'blue' ? 'text-blue-300' : 'text-gray-500')" class="text-xs font-medium mb-1">Á≥ªÁªüÊèêÁ§∫ËØç</div>
                            <textarea 
                                :value="getCurrentTemplatePreview().system_prompt || ''"
                                @input="updateCurrentTemplateField('system_prompt', $event.target.value)"
                                @blur="saveCurrentTemplateToFile()"
                                :class="theme === 'dark' ? 'bg-gray-600 text-gray-200 border-gray-500' : (theme === 'blue' ? 'bg-blue-700 text-blue-100 border-blue-500' : 'bg-gray-50 text-gray-700 border-gray-200')"
                                class="w-full text-xs p-2 rounded border resize-none focus:ring-1 focus:ring-purple-500 focus:outline-none"
                                rows="3"
                                placeholder="(Êú™ËÆæÁΩÆ)"></textarea>
                        </div>
                        <!-- Áî®Êà∑Êåá‰ª§ -->
                        <div :class="theme === 'dark' ? 'bg-gray-700 border-gray-600' : (theme === 'blue' ? 'bg-blue-800 border-blue-600' : 'bg-white border-gray-200')" class="p-3 rounded-lg border">
                            <div :class="theme === 'dark' ? 'text-gray-400' : (theme === 'blue' ? 'text-blue-300' : 'text-gray-500')" class="text-xs font-medium mb-1">Áî®Êà∑Êåá‰ª§</div>
                            <textarea 
                                :value="getCurrentTemplatePreview().user_prompt || ''"
                                @input="updateCurrentTemplateField('user_prompt', $event.target.value)"
                                @blur="saveCurrentTemplateToFile()"
                                :class="theme === 'dark' ? 'bg-gray-600 text-gray-200 border-gray-500' : (theme === 'blue' ? 'bg-blue-700 text-blue-100 border-blue-500' : 'bg-gray-50 text-gray-700 border-gray-200')"
                                class="w-full text-xs p-2 rounded border resize-none focus:ring-1 focus:ring-purple-500 focus:outline-none"
                                rows="2"
                                placeholder="(Êú™ËÆæÁΩÆ)"></textarea>
                        </div>
                    </div>
                    
                    <!-- ÁøªËØëÂäüËÉΩÊåâÈíÆ -->
                    <button 
                        @click="translateSelectedAll()"
                        :disabled="isTranslating || (modelMode === 'tagging' ? selectedIds.length === 0 : selectedPairIds.length === 0)"
                        :class="theme === 'dark' ? 'bg-violet-600 hover:bg-violet-700 disabled:bg-gray-600' : (theme === 'blue' ? 'bg-violet-600 hover:bg-violet-700 disabled:bg-blue-600' : 'bg-violet-600 hover:bg-violet-700 disabled:bg-gray-400')"
                        class="w-full px-3 py-2 text-sm text-white rounded-lg transition-colors flex items-center justify-center space-x-2">
                        <svg x-show="!isTranslating" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"></path>
                        </svg>
                        <svg x-show="isTranslating" class="w-4 h-4 animate-spin" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        <span x-text="isTranslating ? 'ÁøªËØë‰∏≠...' : 'ÁøªËØëÈÄâ‰∏≠Ê†áÁ≠æ'"></span>
                    </button>
                </div>

                <!-- ChatÔºöÂØπËØùÂéÜÂè≤ -->
                <div x-show="modelMode === 'chat'" class="space-y-3">
                    <div :class="theme === 'dark' ? 'bg-gray-700' : 'bg-gray-200'" class="h-px"></div>
                    <div class="flex items-center justify-between">
                        <h3 :class="theme === 'dark' ? 'text-gray-300' : 'text-gray-700'" class="text-sm font-medium">üìö ÂØπËØùÂéÜÂè≤</h3>
                        <button @click="createNewChat()" :class="theme === 'dark' ? 'bg-violet-600 hover:bg-violet-700' : 'bg-violet-600 hover:bg-violet-700'" class="px-2 py-1 text-xs text-white rounded hover:bg-violet-700 transition-colors">‚ûï Êñ∞ÂØπËØù</button>
                    </div>

                    <div class="space-y-2">
                        <template x-if="chatSessions.length === 0">
                            <div :class="theme === 'dark' ? 'text-gray-500' : 'text-gray-400'" class="text-xs text-center py-4">ÊöÇÊó†ÂØπËØùÂéÜÂè≤</div>
                        </template>
                        <template x-for="(session, index) in chatSessions" :key="session.id">
                            <div
                                @click="loadChatSession(session.id)"
                                :class="[
                                    currentChatSessionId === session.id 
                                        ? (theme === 'dark' ? 'bg-violet-900 border-violet-700' : 'bg-violet-50 border-violet-300')
                                        : (theme === 'dark' ? 'bg-gray-700 border-gray-600 hover:bg-gray-650' : 'bg-gray-50 border-gray-200 hover:bg-gray-100')
                                ]"
                                class="p-3 rounded-lg border cursor-pointer transition-colors group"
                            >
                                <div class="flex items-start justify-between">
                                    <div class="flex-1 min-w-0">
                                        <div :class="theme === 'dark' ? 'text-gray-200' : 'text-gray-800'" class="text-sm font-medium truncate" x-text="session.title"></div>
                                        <div :class="theme === 'dark' ? 'text-gray-400' : 'text-gray-500'" class="text-xs mt-1" x-text="session.time"></div>
                                        <div :class="theme === 'dark' ? 'text-gray-500' : 'text-gray-400'" class="text-xs mt-1" x-text="session.messageCount + ' Êù°Ê∂àÊÅØ'"></div>
                                    </div>
                                    <button @click.stop="deleteChatSession(session.id)" class="opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700 transition-opacity">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>

                <!-- Á≥ªÁªüÊèêÁ§∫ËØçÔºàÈöêËóèÔºâ -->
                <div class="hidden">
                    <button @click="showSystemPrompt = !showSystemPrompt" class="w-full flex items-center justify-between text-sm font-medium text-gray-700 mb-2">
                        <span>Á≥ªÁªüÊèêÁ§∫ËØçÔºàÂèçÊé®Ôºâ</span>
                        <svg :class="{'rotate-180': showSystemPrompt}" class="w-4 h-4 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <textarea x-show="showSystemPrompt" x-model="config.system_prompt" @blur="saveConfig()" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm resize-none"></textarea>
                </div>

                <!-- Áî®Êà∑Êåá‰ª§ -->
                <div class="hidden">
                    <button @click="showUserPrompt = !showUserPrompt" class="w-full flex items-center justify-between text-sm font-medium text-gray-700 mb-2">
                        <span>Áî®Êà∑Êåá‰ª§ÔºàÂèçÊé®Ôºâ</span>
                        <svg :class="{'rotate-180': showUserPrompt}" class="w-4 h-4 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <textarea x-show="showUserPrompt" x-model="config.user_prompt" @blur="saveConfig()" rows="6" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm resize-none"></textarea>
                </div>

                <!-- ÂºÄÂßãÂèçÊé®ÊåâÈíÆÔºà‰ªÖÂõæÂÉèÂèçÊé®ÂíåÁºñËæëÊ®°ÂºèÊòæÁ§∫Ôºâ -->
                <button x-show="modelMode === 'tagging' || modelMode === 'editing'" @click="startBatchTag()" :disabled="selectedCount === 0 && selectedPairCount === 0" class="w-full px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed">
                    ‚ú® ÂºÄÂßãÂèçÊé®
                </button>
            </div>
        </div>

        <!-- Âè≥‰æß‰∏ªÂÜÖÂÆπÂå∫ -->
        <div :class="theme === 'dark' ? 'bg-gray-900' : (theme === 'blue' ? 'bg-blue-950' : 'bg-gray-50')" class="flex-1 flex flex-col">
            
            <!-- È°∂ÈÉ®ÔºöÊ®°ÂûãÊ®°ÂºèÈÄâÊã© -->
            <div :class="theme === 'dark' ? 'bg-gray-800 border-gray-700' : (theme === 'blue' ? 'bg-blue-900 border-blue-800' : 'bg-white border-gray-200')" class="border-b px-6 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <span :class="theme === 'dark' ? 'text-gray-300' : 'text-gray-700'" class="text-sm font-medium">Ê®°ÂûãÊ®°Âºè:</span>
                        <button @click="modelMode = 'tagging'" :class="modelMode === 'tagging' ? 'bg-violet-600 text-white' : (theme === 'dark' ? 'bg-gray-700 text-gray-300 hover:bg-gray-600' : 'bg-gray-100 text-gray-700 hover:bg-gray-200')" class="px-4 py-2 text-sm rounded-lg transition-colors font-medium">
                            üè∑Ô∏è ÊñáÁîüÂõæÂèçÊé®
                        </button>
                        <button @click="modelMode = 'editing'" :class="modelMode === 'editing' ? 'bg-violet-600 text-white' : (theme === 'dark' ? 'bg-gray-700 text-gray-300 hover:bg-gray-600' : 'bg-gray-100 text-gray-700 hover:bg-gray-200')" class="px-4 py-2 text-sm rounded-lg transition-colors font-medium">
                            üé® ÂõæÂÉèÁºñËæëÊ®°Âûã
                        </button>
                        <button @click="modelMode = 'analyzer'; loadPendingLogs(); loadAnalyzerRecords()" :class="modelMode === 'analyzer' ? 'bg-violet-600 text-white' : (theme === 'dark' ? 'bg-gray-700 text-gray-300 hover:bg-gray-600' : 'bg-gray-100 text-gray-700 hover:bg-gray-200')" class="px-4 py-2 text-sm rounded-lg transition-colors font-medium">
                            üìä ËÆ≠ÁªÉÂàÜÊûêÂô®
                        </button>
                        <button @click="modelMode = 'chat'" :class="modelMode === 'chat' ? 'bg-violet-600 text-white' : (theme === 'dark' ? 'bg-gray-700 text-gray-300 hover:bg-gray-600' : 'bg-gray-100 text-gray-700 hover:bg-gray-200')" class="px-4 py-2 text-sm rounded-lg transition-colors font-medium">
                            üí¨ AI ÂØπËØù
                        </button>
                    </div>
                    
                    <div class="flex items-center space-x-2">
                        <button @click="showSettingsModal = true" :class="theme === 'dark' ? 'text-gray-400 hover:bg-gray-700' : 'text-gray-600 hover:bg-gray-100'" class="p-2 rounded-lg transition-colors">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
            <div x-show="modelMode !== 'chat'" :class="theme === 'dark' ? 'bg-gray-900' : (theme === 'blue' ? 'bg-blue-950' : 'bg-gray-50')" class="flex-1 overflow-y-auto p-6">
                
                <!-- ==================== ÂõæÂÉèÂèçÊé®ÔºàÂçïÂõæÔºâ ==================== -->

                <!-- ÊãñÊãΩÂØºÂÖ•Âå∫ÂüüÂÆπÂô® -->
                <div 
                    x-show="modelMode === 'tagging'"
                    @dragover.prevent="imagesDragOver = true"
                    @dragleave.prevent="imagesDragOver = false"
                    @drop.prevent="handleImagesDrop($event)"
                    :class="imagesDragOver ? 'ring-2 ring-violet-500 ring-offset-2' : ''"
                    class="min-h-full transition-all duration-200"
                >
                    <!-- ÊâπÈáèÊìç‰ΩúÂ∑•ÂÖ∑Ê†è -->
                    <div x-show="images.length > 0" class="bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4">
                        <div class="flex items-center justify-between flex-wrap gap-3">
                            <!-- Â∑¶‰æßÂ∑•ÂÖ∑ -->
                            <div class="flex items-center space-x-2 flex-wrap">
                                <button @click="selectAll()" class="px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors">
                                    ‚òë ÂÖ®ÈÄâ
                                </button>
                                <button @click="showRenameDialog = true" :disabled="selectedCount === 0" class="px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                                    üîÑ ÈáçÂëΩÂêç
                                </button>
                                <button @click="showResizeDialog = true" :disabled="selectedCount === 0" class="px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                                    ‚úÇ Ë£ÅÂàá
                                </button>
                                <button @click="showAddTextDialog = true" :disabled="selectedCount === 0" class="px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                                    üìù Ê∑ªÂä†ÊñáÊú¨
                                </button>
                                <button @click="clearSelectedText()" :disabled="selectedCount === 0" class="px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                                    üóë Ê∏ÖÁ©∫ÊñáÊú¨
                                </button>
                                <div class="h-6 w-px bg-gray-300"></div>
                                <button @click="batchTag()" :disabled="selectedCount === 0 || isProcessing" class="px-4 py-2 text-sm bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium">
                                    <span x-show="!isProcessing">‚ú® ÂºÄÂßãÂèçÊé®</span>
                                    <span x-show="isProcessing">‚è≥ Â§ÑÁêÜ‰∏≠...</span>
                                </button>
                                <button @click="exportDataset()" :disabled="selectedCount === 0" class="px-4 py-2 text-sm bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium">
                                    ‚¨áÔ∏è ÂØºÂá∫Êï∞ÊçÆÈõÜ
                                </button>
                            </div>

                            <!-- Âè≥‰æßÔºöÁº©ÊîæÊªëÊù° + Âà†Èô§ÊåâÈíÆ -->
                            <div class="flex items-center space-x-4">
                                <!-- Áº©ÊîæÊªëÊù° -->
                                <div class="flex items-center space-x-2">
                                    <button 
                                        @click="gridColumns = Math.min(8, gridColumns + 1)"
                                        class="w-6 h-6 flex items-center justify-center text-violet-600 hover:bg-violet-100 rounded transition-colors"
                                        title="Áº©Â∞è"
                                    >
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M20 12H4"></path>
                                        </svg>
                                    </button>
                                    <input 
                                        type="range" 
                                        :value="10 - gridColumns"
                                        @input="gridColumns = 10 - $event.target.value"
                                        min="2" 
                                        max="8" 
                                        step="1"
                                        class="w-24 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-violet-600"
                                        title="Ë∞ÉÊï¥ÂõæÁâáÂ§ßÂ∞è"
                                    >
                                    <button 
                                        @click="gridColumns = Math.max(2, gridColumns - 1)"
                                        class="w-6 h-6 flex items-center justify-center text-violet-600 hover:bg-violet-100 rounded transition-colors"
                                        title="ÊîæÂ§ß"
                                    >
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Âà†Èô§ÊåâÈíÆ -->
                                <button @click="deleteSelected()" :disabled="selectedCount === 0" class="px-4 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium flex items-center space-x-2">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                    </svg>
                                    <span>Âà†Èô§ÈÄâ‰∏≠</span>
                                </button>
                            </div>
                        </div>

                        <!-- ËøõÂ∫¶Êù° -->
                        <div x-show="isProcessing" class="mt-3">
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="bg-purple-600 h-2 rounded-full transition-all duration-300" :style="`width: ${progress}%`"></div>
                            </div>
                            <p class="text-xs text-gray-500 mt-1" x-text="`Â§ÑÁêÜ‰∏≠: ${taskStatus.completed || 0} / ${taskStatus.total || 0}`"></p>
                            <p class="text-xs text-gray-500 mt-1" x-text="`Â§±Ë¥•: ${taskStatus.failed || 0}`"></p>
                            <p class="text-xs text-gray-500 mt-1" x-show="taskStatus.current_name" x-text="`Ê≠£Âú®ÂèçÊé®: ${taskStatus.current_index || 0}/${taskStatus.total || 0}  ${taskStatus.current_name}`"></p>
                            <div class="mt-2">
                                <button @click="cancelCurrentTask()" :disabled="!currentTaskId" class="px-3 py-1.5 text-xs bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">ÂèñÊ∂à</button>
                            </div>
                        </div>
                    </div>

                    <!-- Á©∫Áä∂ÊÄÅÔºöÂ∑¶‰∏äËßíÁ´ñÂêëÂØºÂÖ•Ê°Ü -->
                    <div x-show="images.length === 0" class="flex justify-start">
                        <div 
                            @click="selectImages()"
                            :class="imagesDragOver ? 'border-violet-500 bg-violet-50' : 'border-gray-300 bg-white hover:border-violet-400 hover:bg-violet-50'"
                            class="border-2 border-dashed rounded-2xl p-8 text-center transition-all duration-200 cursor-pointer w-48 min-h-[320px] flex flex-col items-center justify-center"
                        >
                            <div class="text-5xl mb-4">üìÅ</div>
                            <h3 class="text-sm font-medium text-gray-700 mb-2">ÊãñÊãΩÂõæÁâáÂØºÂÖ•</h3>
                            <p class="text-xs text-gray-500 mb-4 leading-relaxed">PNG„ÄÅJPG„ÄÅWebP<br>ÂêåÂêç .txt Ëá™Âä®ÂåπÈÖç</p>
                            <button class="px-3 py-1.5 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors text-xs">
                                üìÇ ÈÄâÊã©ÂõæÁâá
                            </button>
                        </div>
                    </div>

                    <!-- ÂõæÁâáÁΩëÊ†ºÔºàÁÄëÂ∏ÉÊµÅÔºâ -->
                    <div x-show="images.length > 0" class="grid gap-4" :style="`grid-template-columns: repeat(${gridColumns}, minmax(0, 1fr));`">
                        <template x-for="image in images" :key="image.id">
                        <div 
                            x-transition:enter="transition ease-out duration-300"
                            x-transition:enter-start="opacity-0 scale-90"
                            x-transition:enter-end="opacity-100 scale-100"
                            x-transition:leave="transition ease-in duration-200"
                            x-transition:leave-start="opacity-100 scale-100"
                            x-transition:leave-end="opacity-0 scale-90"
                            class="bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden"
                        >
                            <!-- ÂõæÁâáÂå∫ÂüüÔºàÊåâÂéüÂõæÂÆΩÈ´òÊØîÈì∫Êª°Ôºâ -->
                            <div
                                @click="openDetail(image.id)"
                                class="relative group cursor-pointer bg-gray-100"
                                :style="`aspect-ratio: ${image.width}/${image.height};`"
                            >
                                <img
                                    x-show="image.thumbnail"
                                    :src="image.thumbnail"
                                    :alt="image.name"
                                    class="absolute inset-0 w-full h-full object-cover"
                                    style="display: block;"
                                >

                                <!-- Âä†ËΩΩ‰∏≠ÊàñÊó†Áº©Áï•ÂõæÊèêÁ§∫ -->
                                <div x-show="!image.thumbnail" class="absolute inset-0 flex flex-col items-center justify-center text-gray-400">
                                    <svg class="w-12 h-12 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                    </svg>
                                    <span class="text-sm">Âä†ËΩΩ‰∏≠...</span>
                                </div>

                                <!-- Â∞∫ÂØ∏ÔºöÂ∑¶‰∏äËßíÂè†Âä† -->
                                <div class="absolute top-2 left-2 px-2 py-1 rounded-md bg-black/60 text-white text-xs font-medium" x-text="`${image.width}x${image.height}`"></div>

                                <!-- ÂãæÈÄâÊ°ÜÔºöÂè≥‰∏äËßíÂè†Âä†ÔºàÈÅøÂÖçÂíåÂ∞∫ÂØ∏ÈáçÂè†Ôºâ -->
                                <div class="absolute top-2 right-2 z-10">
                                    <input type="checkbox" :checked="image.selected" @click.stop="toggleSelect(image.id)" class="w-5 h-5 text-purple-600 rounded focus:ring-purple-500 bg-white/90 border-gray-300 cursor-pointer">
                                </div>

                                <!-- ÊÇ¨ÂÅúÊïàÊûú -->
                                <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all flex items-center justify-center">
                                    <svg class="w-8 h-8 text-white opacity-0 group-hover:opacity-100 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"></path>
                                    </svg>
                                </div>

                                <div x-show="isProcessing && taskStatus.type === 'images' && taskStatus.current_id === image.id" class="absolute inset-0 bg-black/30 flex items-center justify-center">
                                    <svg class="animate-spin h-8 w-8 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
                                    </svg>
                                </div>
                            </div>

                            <!-- ÊñáÊú¨È¢ÑËßàÂå∫ÂüüÔºàÂõæÁâá‰∏ãÊñπÔºâ -->
                            <div class="p-3 bg-white">
                                <!-- Ëã±ÊñáÊñáÊú¨ÔºàÂèØÁºñËæëÔºâ -->
                                <textarea 
                                    x-model="image.text"
                                    @click.stop
                                    @blur="saveImageText(image)"
                                    class="w-full text-sm text-gray-700 p-2 bg-white border border-gray-200 rounded resize-none focus:ring-1 focus:ring-purple-500 focus:outline-none mb-2"
                                    rows="3"
                                    placeholder="ËæìÂÖ•Ëã±ÊñáÊ†áÁ≠æ"></textarea>
                                
                                <!-- ‰∏≠ÊñáÁøªËØëÂå∫Âüü -->
                                <div x-show="image.chineseText" class="mb-2">
                                    <div class="flex items-center justify-between mb-1">
                                        <span class="text-xs text-gray-400">‰∏≠ÊñáÁøªËØë</span>
                                        <button 
                                            @click.stop="syncImageChineseToEnglish(image)"
                                            :disabled="isSyncingTranslation"
                                            class="text-xs text-green-600 hover:text-green-700 flex items-center space-x-1">
                                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                            </svg>
                                            <span>ÂêåÊ≠•</span>
                                        </button>
                                    </div>
                                    <textarea 
                                        x-model="image.chineseText"
                                        @click.stop
                                        class="w-full text-xs text-gray-600 p-2 bg-gray-50 border border-gray-200 rounded resize-none focus:ring-1 focus:ring-purple-500 focus:outline-none"
                                        rows="2"
                                        placeholder="‰∏≠ÊñáÁøªËØë"></textarea>
                                </div>
                                
                                <div class="flex items-center justify-between gap-2">
                                    <p class="text-xs text-gray-400 truncate" x-text="image.name"></p>
                                    <div class="flex items-center space-x-2 shrink-0">
                                        <!-- success indicator removed -->
                                        <span x-show="isProcessing && taskStatus.type === 'images' && taskStatus.current_id === image.id" class="text-blue-500">
                                            <svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
                                            </svg>
                                        </span>
                                        <span x-show="image.status === 'error'" class="text-red-500 text-xs">‚ùå</span>
                                        <span x-show="image.status === 'idle'" class="text-gray-400 text-xs">‚ö™</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </template>

                    <!-- ‰∏ä‰º†ÂõæÁâáÁ©∫Ê°ÜÂç°ÁâáÔºàÊîØÊåÅÊãñÊãΩÈ´ò‰∫ÆÔºâ -->
                    <div 
                        @click="selectImages()"
                        :class="imagesDragOver ? 'border-violet-500 bg-violet-50' : 'border-gray-300 hover:border-purple-500 hover:bg-purple-50'"
                        class="bg-white rounded-xl border-2 border-dashed transition-all duration-300 cursor-pointer flex flex-col items-center justify-center group min-h-[300px]"
                    >
                        <div class="p-6 flex flex-col items-center text-gray-400 group-hover:text-purple-600">
                            <svg class="w-16 h-16 mb-4 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                            <span class="text-sm font-medium">ÁÇπÂáªÊ∑ªÂä†ÂõæÁâá</span>
                            <span class="text-xs mt-1">ÊàñÊãñÊãΩÂà∞Ê≠§Â§Ñ</span>
                        </div>
                    </div>
                </div>
                </div>

                <!-- ==================== ÂõæÂÉèÁºñËæëÔºàÊàêÂØπÔºâ ==================== -->

                <div x-show="modelMode === 'editing'" class="space-y-4">
                    <!-- ÁºñËæëÊ®°ÂºèÂ∑•ÂÖ∑Ê†è -->
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
                        <div class="flex items-center justify-between flex-wrap gap-3">
                            <div class="flex items-center space-x-2 flex-wrap gap-y-2">
                                <button @click="selectAllPairs()" class="px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors flex items-center space-x-1">
                                    <input type="checkbox" :checked="pairs.length > 0 && selectedPairCount === pairs.length" class="w-4 h-4 text-violet-600 rounded pointer-events-none">
                                    <span>ÂÖ®ÈÄâ</span>
                                </button>
                                <div x-show="selectedPairCount > 0" x-cloak x-transition class="flex items-center space-x-2">
                                    <button @click="batchTagPairs()" :disabled="selectedPairCount === 0 || isProcessing" class="px-3 py-2 text-sm bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                                        <span x-show="!isProcessing">‚ú® ‰∏ÄÈîÆÂèçÊé®</span>
                                        <span x-show="isProcessing">‚è≥ Â§ÑÁêÜ‰∏≠...</span>
                                    </button>
                                    <button @click="openExportDialog()" :disabled="selectedPairCount === 0" class="px-3 py-2 text-sm bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                                        ‚¨áÔ∏è ÂØºÂá∫
                                    </button>
                                </div>
                                
                                <!-- ‰∏¥Êó∂‰øùÂ≠òÂíåÁºìÂ≠òÁÆ°ÁêÜ -->
                                <div class="flex items-center space-x-2">
                                    <button @click="saveTempCache()" class="px-3 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors" title="Âø´ÈÄü‰øùÂ≠òÂΩìÂâçÁºñËæëÁä∂ÊÄÅ" :disabled="isCacheBusy">
                                        üíæ ‰∏¥Êó∂‰øùÂ≠ò
                                    </button>
                                    <button @click="showCacheManagerDialog = true" class="px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors" title="ÁÆ°ÁêÜÊâÄÊúâÁºìÂ≠ò">
                                        üì¶ ÁºìÂ≠òÁÆ°ÁêÜ
                                    </button>
                                </div>
                                
                                <span x-show="selectedPairCount > 0" x-transition :class="theme === 'dark' ? 'bg-violet-900 text-violet-200' : (theme === 'blue' ? 'bg-blue-800 text-blue-200' : 'bg-violet-100 text-violet-700')" class="px-3 py-2 text-sm rounded-lg font-medium">
                                    <span x-text="selectedPairCount"></span> / <span x-text="pairs.length"></span> ÁªÑ
                                </span>
                            </div>
                            <div class="flex items-center space-x-4">
                                <!-- Áº©ÊîæÊªëÊù° -->
                                <div class="flex items-center space-x-2">
                                    <button 
                                        @click="pairGridColumns = Math.min(5, pairGridColumns + 1)"
                                        class="w-6 h-6 flex items-center justify-center text-violet-600 hover:bg-violet-100 rounded transition-colors"
                                        title="Áº©Â∞è"
                                    >
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M20 12H4"></path>
                                        </svg>
                                    </button>
                                    <input 
                                        type="range" 
                                        :value="6 - pairGridColumns"
                                        @input="pairGridColumns = 6 - $event.target.value"
                                        min="1" 
                                        max="5" 
                                        step="1"
                                        class="w-24 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-violet-600"
                                        title="Ë∞ÉÊï¥Âç°ÁâáÂ§ßÂ∞è"
                                    >
                                    <button 
                                        @click="pairGridColumns = Math.max(1, pairGridColumns - 1)"
                                        class="w-6 h-6 flex items-center justify-center text-violet-600 hover:bg-violet-100 rounded transition-colors"
                                        title="ÊîæÂ§ß"
                                    >
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Âà†Èô§ÊåâÈíÆ -->
                                <button x-show="selectedPairCount > 0" x-transition @click="deleteSelectedPairs()" class="px-3 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">
                                    üóë Âà†Èô§ÈÄâ‰∏≠
                                </button>
                            </div>
                        </div>

                        <!-- ÊâπÈáèÊñáÊú¨Êìç‰ΩúÊ†è - ÈÄâ‰∏≠Êó∂ÊòæÁ§∫ -->
                        <div x-show="selectedPairCount > 0" x-transition class="mt-3 p-3 bg-gray-50 rounded-lg border border-gray-200">
                            <div class="flex items-center flex-wrap gap-3">
                                <div class="flex items-center space-x-2">
                                    <label class="text-xs text-gray-600 whitespace-nowrap">Êìç‰ΩúÁ±ªÂûã</label>
                                    <select x-model="batchTextAction" class="px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500">
                                        <option value="append">ÊâπÈáèÊ∑ªÂä†ÊñáÊú¨</option>
                                        <option value="clear">ÊâπÈáèÊ∏ÖÁ©∫ÊñáÊú¨</option>
                                        <option value="resize">ÂõæÁâáË£ÅÂàá</option>
                                    </select>
                                </div>
                                <div x-show="batchTextAction === 'append'" class="flex items-center space-x-2">
                                    <label class="text-xs text-gray-600 whitespace-nowrap">Ê∑ªÂä†‰ΩçÁΩÆ</label>
                                    <select x-model="batchTextPosition" class="px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500">
                                        <option value="prefix">ÊèêÁ§∫ËØçÂè•È¶ñ</option>
                                        <option value="suffix">ÊèêÁ§∫ËØçÂè•Â∞æ</option>
                                    </select>
                                </div>
                                <div x-show="batchTextAction === 'append'" class="flex-1 min-w-[200px]">
                                    <input type="text" x-model="batchTextValue" placeholder="ËØ∑ËæìÂÖ•ÊñáÊú¨" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500">
                                </div>
                                <div x-show="batchTextAction === 'resize'" class="flex items-center space-x-2">
                                    <label class="text-xs text-gray-600 whitespace-nowrap">ÊúÄÈïøËæπ</label>
                                    <input type="number" x-model="pairResizeValue" placeholder="1536" class="w-24 px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500">
                                    <span class="text-xs text-gray-500">px</span>
                                </div>
                                <button @click="applyBatchText()" class="px-4 py-1.5 text-sm bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors whitespace-nowrap">
                                    ‚úÖ Â∫îÁî®Âà∞ÈÄâ‰∏≠
                                </button>
                            </div>
                        </div>

                        <!-- ÂØºÂÖ•ËøõÂ∫¶Êù° -->
                        <div x-show="isImporting" class="mt-3">
                            <div class="w-full bg-gray-200 rounded-full h-2 overflow-hidden">
                                <div class="bg-violet-600 h-2 rounded-full animate-pulse" style="width: 100%"></div>
                            </div>
                            <p class="text-xs text-gray-500 mt-1" x-text="importProgressText"></p>
                        </div>

                        <!-- ÊâπÈáèÂ§ÑÁêÜËøõÂ∫¶Êù° -->
                        <div x-show="isProcessing" class="mt-3">
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="bg-purple-600 h-2 rounded-full transition-all duration-300" :style="`width: ${progress}%`"></div>
                            </div>
                            <p class="text-xs text-gray-500 mt-1" x-text="`Â§ÑÁêÜ‰∏≠: ${taskStatus.completed || 0} / ${taskStatus.total || 0}`"></p>
                            <p class="text-xs text-gray-500 mt-1" x-text="`Â§±Ë¥•: ${taskStatus.failed || 0}`"></p>
                            <p class="text-xs text-gray-500 mt-1" x-show="taskStatus.current_name" x-text="`Ê≠£Âú®ÂèçÊé®: ${taskStatus.current_index || 0}/${taskStatus.total || 0}  ${taskStatus.current_name}`"></p>
                            <div class="mt-2">
                                <button @click="cancelCurrentTask()" :disabled="!currentTaskId" class="px-3 py-1.5 text-xs bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">ÂèñÊ∂à</button>
                            </div>
                        </div>
                    </div>

                    <!-- ÊàêÂØπÂõæÁâáÁΩëÊ†ºÔºöÊØèÁªÑ‰∏Ä‰∏™Âç°Áâá -->
                    <div class="grid gap-3" :style="`grid-template-columns: repeat(${pairGridColumns}, minmax(0, 1fr));`">
                        <template x-for="pair in pairs" :key="pair.id">
                            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-2 relative">
                                <!-- Â∑¶‰∏äËßíÂ§çÈÄâÊ°Ü - z-20Á°Æ‰øùÂú®ÊÇ¨ÂÅúÈÅÆÁΩ©‰πã‰∏ä -->
                                <div class="absolute top-1 left-1 z-20">
                                    <input type="checkbox" :checked="pair.selected" @click.stop="togglePairSelect(pair.id)" class="w-4 h-4 text-violet-600 rounded focus:ring-violet-500 border-gray-300 cursor-pointer bg-white/90">
                                </div>

                                <!-- Âè≥‰∏äËßíÂà†Èô§ÊåâÈíÆ - ÊÇ¨ÂÅúÊòæÁ§∫ -->
                                <button @click.stop="deleteSinglePair(pair.id)" class="absolute top-1 right-1 z-20 w-5 h-5 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity text-xs font-bold shadow-sm">
                                    ‚úï
                                </button>

                                <div x-show="isProcessing && taskStatus.type === 'pairs' && taskStatus.current_id === pair.id" class="absolute inset-0 bg-black/30 flex items-center justify-center z-20 rounded-lg">
                                    <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
                                    </svg>
                                </div>

                                <!-- ÂõæÁâáÈ¢ÑËßàÂå∫ÂüüÔºöÊîØÊåÅ‰∏§Âº†Êàñ‰∏âÂº†È¢ÑËßàÔºàÂΩìÂ≠òÂú® left2 Êó∂ÊòæÁ§∫‰∏âÂõæÔºâ -->
                                <template x-if="pair.left2">
                                    <div class="flex gap-1 relative group/images">
                                        <!-- ÊÇ¨ÂÅúÊó∂ÊòæÁ§∫ÁöÑÁºñËæëÊåâÈíÆ - ‰ªÖË¶ÜÁõñÂõæÁâáÂå∫Âüü -->
                                        <div class="absolute inset-0 bg-black/40 opacity-0 group-hover/images:opacity-100 transition-opacity flex items-center justify-center z-10 rounded-lg">
                                            <button @click="openPairDetail(pair.id)" class="px-4 py-2 text-sm bg-white text-gray-800 rounded-lg hover:bg-gray-100 transition-colors font-medium">
                                                üìù ÁºñËæë
                                            </button>
                                        </div>
                                        <div class="flex-1">
                                            <div class="relative aspect-square bg-gray-100 rounded overflow-hidden">
                                                <img x-show="pair.left && pair.left.thumbnail" :src="pair.left.thumbnail" class="absolute inset-0 w-full h-full object-cover">
                                                <div x-show="!pair.left" class="absolute inset-0 flex items-center justify-center text-gray-400 text-xs">ÂéüÂõæ</div>
                                            </div>
                                            <!-- ÂéüÂõæÊñá‰ª∂Âêç -->
                                            <p class="text-xs text-gray-400 truncate mt-1 text-center" x-text="pair.left && pair.left.name ? pair.left.name : ''"></p>
                                        </div>
                                        <div class="flex-1">
                                            <div class="relative aspect-square bg-gray-100 rounded overflow-hidden">
                                                <img x-show="pair.left2 && pair.left2.thumbnail" :src="pair.left2.thumbnail" class="absolute inset-0 w-full h-full object-cover">
                                                <div x-show="!pair.left2" class="absolute inset-0 flex items-center justify-center text-gray-400 text-xs">ÂéüÂõæ2</div>
                                            </div>
                                            <!-- ÂéüÂõæ2Êñá‰ª∂Âêç -->
                                            <p class="text-xs text-gray-400 truncate mt-1 text-center" x-text="pair.left2 && pair.left2.name ? pair.left2.name : ''"></p>
                                        </div>
                                        <div class="flex-1">
                                            <div class="relative aspect-square bg-gray-100 rounded overflow-hidden">
                                                <img x-show="pair.right && pair.right.thumbnail" :src="pair.right.thumbnail" class="absolute inset-0 w-full h-full object-cover">
                                                <div x-show="!pair.right" class="absolute inset-0 flex items-center justify-center text-gray-400 text-xs">ÁõÆÊ†á</div>
                                            </div>
                                            <!-- ÁõÆÊ†áÂõæÊñá‰ª∂Âêç -->
                                            <p class="text-xs text-gray-400 truncate mt-1 text-center" x-text="pair.right && pair.right.name ? pair.right.name : ''"></p>
                                        </div>
                                    </div>
                                </template>
                                <template x-if="!pair.left2">
                                    <div class="flex gap-1 relative group/images">
                                        <!-- ÊÇ¨ÂÅúÊó∂ÊòæÁ§∫ÁöÑÁºñËæëÊåâÈíÆ - ‰ªÖË¶ÜÁõñÂõæÁâáÂå∫Âüü -->
                                        <div class="absolute inset-0 bg-black/40 opacity-0 group-hover/images:opacity-100 transition-opacity flex items-center justify-center z-10 rounded-lg">
                                            <button @click="openPairDetail(pair.id)" class="px-4 py-2 text-sm bg-white text-gray-800 rounded-lg hover:bg-gray-100 transition-colors font-medium">
                                                üìù ÁºñËæë
                                            </button>
                                        </div>
                                        <!-- ÂõæÁâá1 - Áã¨Á´ãÊ≠£ÊñπÂΩ¢Ê°Ü -->
                                        <div class="flex-1">
                                            <div class="relative aspect-square bg-gray-100 rounded overflow-hidden">
                                                <img x-show="pair.left && pair.left.thumbnail" :src="pair.left.thumbnail" class="absolute inset-0 w-full h-full object-cover">
                                                <div x-show="!pair.left" class="absolute inset-0 flex items-center justify-center text-gray-400 text-xs">ÂéüÂõæ</div>
                                            </div>
                                            <!-- ÂéüÂõæÊñá‰ª∂Âêç -->
                                            <p class="text-xs text-gray-400 truncate mt-1 text-center" x-text="pair.left && pair.left.name ? pair.left.name : ''"></p>
                                        </div>
                                        <!-- ÁõÆÊ†áÂõæ - Áã¨Á´ãÊ≠£ÊñπÂΩ¢Ê°Ü -->
                                        <div class="flex-1">
                                            <div class="relative aspect-square bg-gray-100 rounded overflow-hidden">
                                                <img x-show="pair.right && pair.right.thumbnail" :src="pair.right.thumbnail" class="absolute inset-0 w-full h-full object-cover">
                                                <div x-show="!pair.right" class="absolute inset-0 flex items-center justify-center text-gray-400 text-xs">ÁõÆÊ†á</div>
                                            </div>
                                            <!-- ÁõÆÊ†áÂõæÊñá‰ª∂Âêç -->
                                            <p class="text-xs text-gray-400 truncate mt-1 text-center" x-text="pair.right && pair.right.name ? pair.right.name : ''"></p>
                                        </div>
                                    </div>
                                </template>

                                <!-- Â∫ïÈÉ®ÊèêÁ§∫ËØçÈ¢ÑËßà -->
                                <div class="mt-2 pt-2 border-t border-gray-100">
                                    <!-- Ëã±ÊñáÊèêÁ§∫ËØçÔºàÂèØÁºñËæëÔºâ -->
                                    <textarea 
                                        x-model="pair.text"
                                        @click.stop
                                        @blur="savePairText(pair)"
                                        class="w-full text-xs text-gray-700 p-2 bg-white border border-gray-200 rounded resize-none focus:ring-1 focus:ring-purple-500 focus:outline-none mb-1"
                                        rows="2"
                                        placeholder="ËæìÂÖ•Ëã±ÊñáÊèêÁ§∫ËØç"></textarea>
                                    <div class="flex items-center justify-between">
                                        <p class="text-xs text-gray-400 truncate" x-text="pair.right?.name || ''"></p>
                                        <div class="flex items-center space-x-1">
                                            <span x-show="pair.status === 'error'" class="text-red-500 text-xs shrink-0">‚ùå</span>
                                            <span x-show="pair.status === 'idle' && !(isProcessing && taskStatus.type === 'pairs' && taskStatus.current_id === pair.id)" class="text-gray-400 text-xs shrink-0">‚ö™</span>
                                            <span x-show="isProcessing && taskStatus.type === 'pairs' && taskStatus.current_id === pair.id" class="text-blue-500 shrink-0">
                                                <svg class="animate-spin h-3 w-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
                                                </svg>
                                            </span>
                                        </div>
                                    </div>
                                    <!-- ‰∏≠ÊñáÁøªËØëÂå∫Âüü -->
                                    <div x-show="pair.chineseText" class="mt-2">
                                        <div class="flex items-center justify-between mb-1">
                                            <span class="text-xs text-gray-400">‰∏≠ÊñáÁøªËØë</span>
                                            <button 
                                                @click.stop="syncPairChineseToEnglish(pair)"
                                                :disabled="isSyncingTranslation"
                                                class="text-xs text-green-600 hover:text-green-700 flex items-center space-x-1">
                                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                                </svg>
                                                <span>ÂêåÊ≠•</span>
                                            </button>
                                        </div>
                                        <textarea 
                                            x-model="pair.chineseText"
                                            @click.stop
                                            class="w-full text-xs text-gray-600 p-2 bg-gray-50 border border-gray-200 rounded resize-none focus:ring-1 focus:ring-purple-500 focus:outline-none"
                                            rows="2"
                                            placeholder="‰∏≠ÊñáÁøªËØë"></textarea>
                                    </div>
                                </div>
                            </div>
                        </template>

                        <!-- ÂØºÂÖ•Êï∞ÊçÆÈõÜÂç°Áâá -->
                        <div @click="selectPairFolder()" :class="theme === 'dark' ? 'bg-gradient-to-br from-violet-900 to-purple-900 border-violet-700 hover:border-violet-600' : (theme === 'blue' ? 'bg-gradient-to-br from-blue-900 to-indigo-900 border-blue-700 hover:border-blue-600' : 'bg-gradient-to-br from-violet-50 to-purple-50 border-violet-300 hover:border-violet-500')" class="rounded-lg border-2 border-dashed hover:shadow-lg transition-all duration-300 cursor-pointer flex flex-col items-center justify-center group min-h-[120px]">
                            <div class="p-3 flex flex-col items-center" :class="theme === 'dark' ? 'text-violet-300 group-hover:text-violet-200' : (theme === 'blue' ? 'text-blue-300 group-hover:text-blue-200' : 'text-violet-500 group-hover:text-violet-600')">
                                <svg class="w-12 h-12 mb-2 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path>
                                </svg>
                                <span class="text-sm font-bold">üìÇ ÂØºÂÖ•Êï∞ÊçÆÈõÜ</span>
                                <span class="text-xs mt-1" :class="theme === 'dark' ? 'text-violet-400' : (theme === 'blue' ? 'text-blue-400' : 'text-violet-400')">ÁÇπÂáªÈÄâÊã©Êñá‰ª∂Â§π</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ==================== ËÆ≠ÁªÉÂàÜÊûêÂô® ==================== -->
                <div x-show="modelMode === 'analyzer'" class="space-y-4">
                    <!-- APIÈÖçÁΩÆÂå∫ÂüüÔºàÂÜÖÂµåÂú®ËÆ≠ÁªÉÂàÜÊûêÂô®È°µÈù¢Ôºâ -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-4">
                        <div class="flex items-center space-x-6">
                            <div class="flex items-center space-x-3">
                                <label class="text-sm font-medium text-gray-700 whitespace-nowrap">API Ê∏†ÈÅì:</label>
                                <select x-model="apikeyConfig.current_provider" @change="onProviderChange()" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm min-w-[160px]">
                                    <template x-for="(provider, key) in apikeyConfig.providers" :key="key">
                                        <option :value="key" x-text="providerNames[key]"></option>
                                    </template>
                                </select>
                            </div>
                            <div class="flex items-center space-x-3">
                                <label class="text-sm font-medium text-gray-700 whitespace-nowrap">ÈÄâÊã©Ê®°Âûã:</label>
                                <select x-model="apikeyConfig.model" @change="saveApikeyConfig(true)" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm min-w-[240px]">
                                    <template x-for="model in getCurrentProviderModels()" :key="model.id">
                                        <option :value="model.id" x-text="model.name"></option>
                                    </template>
                                </select>
                            </div>
                            <button @click="showAnalyzerSettingsModal = true" class="px-3 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors text-sm flex items-center space-x-1">
                                <span>‚öôÔ∏è</span>
                                <span>Êõ¥Â§öËÆæÁΩÆ</span>
                            </button>
                        </div>
                    </div>

                    <!-- Â≠êÊ†áÁ≠æÈ°µ -->
                    <div class="flex space-x-2 mb-4">
                        <button @click="analyzerSubTab = 'pending'; loadPendingLogs()" :class="analyzerSubTab === 'pending' ? 'bg-green-600 text-white' : 'bg-white text-gray-700 border border-gray-300'" class="px-4 py-2 rounded-lg font-medium transition-colors">
                            üìÅ ÂæÖÂàÜÊûê
                        </button>
                        <button @click="analyzerSubTab = 'compare'" :class="analyzerSubTab === 'compare' ? 'bg-green-600 text-white' : 'bg-white text-gray-700 border border-gray-300'" class="px-4 py-2 rounded-lg font-medium transition-colors">
                            üîé ÂØπÊØîÈÄâÊã©
                        </button>
                    </div>

                    <!-- ÂæÖÂàÜÊûêÊñá‰ª∂Ê†áÁ≠æÈ°µ -->
                    <div x-show="analyzerSubTab === 'pending'" class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold text-green-700">üìÅ ÂæÖÂàÜÊûêÊó•ÂøóÊñá‰ª∂</h3>
                            <div class="flex space-x-2">
                                <button @click="loadPendingLogs()" class="px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm">
                                    üîÑ Âà∑Êñ∞
                                </button>
                                <button @click="analyzeAllPending()" :disabled="pendingLogs.length === 0" class="px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed">
                                    ‚ú® ÂàÜÊûêÂÖ®ÈÉ®
                                </button>
                            </div>
                        </div>
                        
                        <!-- ÊãñÊãΩ‰∏ä‰º†Âå∫Âüü -->
                        <div 
                            @dragover="handleDragOver($event)"
                            @dragleave="handleDragLeave($event)"
                            @drop="handleDrop($event)"
                            :class="isDragOver ? 'border-green-500 bg-green-50' : 'border-gray-300 bg-gray-50'"
                            class="border-2 border-dashed rounded-xl p-8 mb-4 text-center transition-colors cursor-pointer"
                            @click="browseLogFile().then(() => analyzerLogPath && addLogFromPath(analyzerLogPath))"
                        >
                            <div class="text-4xl mb-2">üìÇ</div>
                            <p class="text-gray-600 font-medium">ÊãñÊãΩÊó•ÂøóÊñá‰ª∂Âà∞Ê≠§Â§Ñ‰∏ä‰º†</p>
                            <p class="text-gray-400 text-sm mt-1">ÊàñÁÇπÂáªÈÄâÊã©Êñá‰ª∂ ¬∑ ÊîØÊåÅ .txt / .log Ê†ºÂºè</p>
                        </div>
                        
                        <!-- ÂæÖÂàÜÊûêÊñá‰ª∂ÂàóË°® -->
                        <template x-if="pendingLogs.length > 0">
                            <div class="space-y-2">
                                <template x-for="log in pendingLogs" :key="log.path">
                                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors">
                                        <div class="flex items-center space-x-3">
                                            <span class="text-2xl">üìÑ</span>
                                            <div>
                                                <p class="font-medium text-gray-800" x-text="log.name"></p>
                                                <p class="text-xs text-gray-500" x-text="formatFileSize(log.size)"></p>
                                            </div>
                                        </div>
                                        <div class="flex space-x-2">
                                            <button @click="analyzeAndMove(log.path)" class="px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm">
                                                üîç ÂàÜÊûê
                                            </button>
                                            <button @click="deletePendingLog(log.path)" class="px-3 py-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm">
                                                üóëÔ∏è
                                            </button>
                                        </div>
                                    </div>
                                </template>
                            </div>
                        </template>
                        
                        <template x-if="pendingLogs.length === 0">
                            <div class="text-center text-gray-400 py-8">
                                <p>ÊöÇÊó†ÂæÖÂàÜÊûêÁöÑÊó•ÂøóÊñá‰ª∂</p>
                                <p class="text-sm mt-1">ÊãñÊãΩÊàñÁÇπÂáª‰∏äÊñπÂå∫ÂüüÊ∑ªÂä†Êñá‰ª∂</p>
                            </div>
                        </template>
                    </div>

                    <!-- ÂØπÊØîÈÄâÊã©Ê†áÁ≠æÈ°µ -->
                    <div x-show="analyzerSubTab === 'compare'" class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold text-green-700">üîé ÂØπÊØîÈÄâÊã©</h3>
                            <div>
                                <!-- Âè≥‰∏äÊåâÈíÆÂ∑≤ÁßªËá≥Â∑¶‰æßÈÄâÊã©Èù¢Êùø -->
                            </div>
                        </div>
                        <div class="flex gap-4">
                            <div class="w-64 bg-gray-50 p-3 rounded border border-gray-100 max-h-[60vh] overflow-y-auto">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="text-sm text-gray-700 font-medium">ÂèØÈÄâËÆ∞ÂΩïÔºàÂ∑¶‰æßÂãæÈÄâÊéßÂà∂ÂØπÊØîÔºâ</div>
                                    <div class="space-x-1">
                                        <button @click="loadAnalyzerRecords()" title="Âà∑Êñ∞" class="px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200">üîÑ</button>
                                        <button @click="toggleSelectAll(); $nextTick(() => loadAndDrawSelectedRecords())" title="ÂÖ®ÈÄâ/ÂèñÊ∂à" class="px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200">ÂÖ®ÈÄâ/ÂèñÊ∂à</button>
                                        <button @click="bulkDeleteSelectedRecords()" :disabled="selectedRecordIds.length === 0" title="Âà†Èô§ÊâÄÈÄâ" class="px-2 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed">üóë Âà†Èô§</button>
                                    </div>
                                </div>
                                <div class="text-xs text-gray-500 mb-2">Â∑≤ÈÄâ <span x-text="selectedRecordIds.length"></span> Êù°</div>
                                
                                <template x-for="rec in analyzerRecords" :key="rec.id">
                                    <div class="flex items-center justify-between py-2 border-b last:border-b-0">
                                        <div class="flex items-center space-x-2">
                                            <input type="checkbox"
                                                   :checked="selectedRecordIds.includes(rec.id)"
                                                   @change="onToggleSelect(rec.id)"
                                                   :style="selectedColors[rec.id] ? 'accent-color:' + selectedColors[rec.id] + '; border-color:' + selectedColors[rec.id] : ''"
                                                   class="w-4 h-4 rounded">
                                            <div class="text-sm" x-text="rec.model_name"></div>
                                        </div>
                                        <div class="text-xs text-gray-500" x-text="rec.analysis_date"></div>
                                    </div>
                                </template>
                                <template x-if="!analyzerRecords || analyzerRecords.length === 0">
                                    <div class="text-sm text-gray-400 p-2">Êó†ÂéÜÂè≤ËÆ∞ÂΩï</div>
                                </template>
                            </div>

                            <div class="flex-1">
                                <div class="mb-3 flex items-center space-x-2">
                                    <button @click="compareRightTab='curve'" :class="compareRightTab==='curve' ? 'bg-green-600 text-white' : 'bg-white border border-gray-200 text-gray-700'" class="px-3 py-1 rounded">ËÆ≠ÁªÉÊõ≤Á∫ø</button>
                                    <button @click="compareRightTab='table'" :class="compareRightTab==='table' ? 'bg-green-600 text-white' : 'bg-white border border-gray-200 text-gray-700'" class="px-3 py-1 rounded">ÂèÇÊï∞Ë°®Ê†º</button>
                                </div>

                                <div x-show="compareRightTab === 'curve'">
                                    <div class="h-72 mb-4">
                                        <canvas id="compareChart"></canvas>
                                    </div>
                                </div>

                                <div x-show="compareRightTab === 'table'">
                                    <div class="p-3 bg-blue-50 rounded border border-blue-100">
                                        <h4 class="text-sm font-medium text-blue-700 mb-2">ÈÄâ‰∏≠ËÆ∞ÂΩïÂèÇÊï∞ÔºàË°®Ê†ºÔºâ</h4>
                                        <div class="overflow-x-auto">
                                            <table class="w-full text-sm border-collapse">
                                                <thead>
                                                    <tr class="bg-blue-50">
                                                        <th class="border px-2 py-1 text-left">Ê®°ÂûãÂêçÁß∞</th>
                                                        <th class="border px-2 py-1 text-left">epoch</th>
                                                        <th class="border px-2 py-1 text-left">steps</th>
                                                        <th class="border px-2 py-1 text-left">ËÆ≠ÁªÉÂ∫ïÊ®°</th>
                                                        <th class="border px-2 py-1 text-left">Â≠¶‰π†Áéá</th>
                                                        <th class="border px-2 py-1 text-left">ËÆ≠ÁªÉÊó∂Èó¥</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <template x-for="rec in compareData" :key="rec.id">
                                                        <tr>
                                                            <td class="border px-2 py-1" x-text="rec.model_name"></td>
                                                            <td class="border px-2 py-1" x-text="rec.num_epochs || rec.total_trained_epochs || rec.config?.num_train_epochs || 'N/A'"></td>
                                                            <td class="border px-2 py-1" x-text="rec.steps || rec.config?.steps || 'N/A'"></td>
                                                            <td class="border px-2 py-1" x-text="(rec.pretrained_model_name_or_path || rec.config?.pretrained_model_name_or_path || '').split(/[/\\\\]/).pop() || 'N/A'"></td>
                                                            <td class="border px-2 py-1" x-text="rec.learning_rate || rec.config?.learning_rate || 'N/A'"></td>
                                                            <td class="border px-2 py-1" x-text="rec.training_time || rec.config?.training_time || 'N/A'"></td>
                                                        </tr>
                                                    </template>
                                                    <template x-if="!compareData || compareData.length === 0">
                                                        <tr><td class="p-3 text-gray-400" colspan="6">Êú™ÈÄâ‰∏≠ËÆ∞ÂΩï</td></tr>
                                                    </template>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- ËÆ≠ÁªÉÊõ≤Á∫øÊ†áÁ≠æÈ°µ -->
                    <div x-show="analyzerSubTab === 'curve'" class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 max-h-[calc(100vh-200px)] overflow-y-auto">
                        <!-- ÂØπÊØîÊ®°ÂºèÊèêÁ§∫ -->
                        <template x-if="compareMode">
                            <div class="mb-4 p-3 bg-violet-50 border border-violet-200 rounded-lg flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <span class="text-violet-600">üìä</span>
                                    <span class="text-violet-700 font-medium">ÂØπÊØîÊ®°ÂºèÔºöÊ≠£Âú®ÂØπÊØî <span x-text="compareData.length"></span> Êù°ËÆ≠ÁªÉËÆ∞ÂΩï</span>
                                </div>
                                <button @click="exitCompareMode()" class="px-3 py-1 bg-violet-600 text-white text-sm rounded-lg hover:bg-violet-700 transition-colors">
                                    ÈÄÄÂá∫ÂØπÊØî
                                </button>
                            </div>
                        </template>

                        <template x-if="!analyzerResult && !compareMode">
                            <div class="h-64 flex items-center justify-center text-gray-400">
                                <div class="text-center">
                                    <svg class="w-16 h-16 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                    </svg>
                                    <p>ËØ∑ÂÖàÂú®"ÂæÖÂàÜÊûê"Ê†áÁ≠æÈ°µÈÄâÊã©Êó•ÂøóÊñá‰ª∂ËøõË°åÂàÜÊûê</p>
                                    <p class="text-sm mt-2">ÊàñÂú®"ÂéÜÂè≤ËÆ∞ÂΩï"‰∏≠ÂãæÈÄâÂ§öÊù°ËÆ∞ÂΩïËøõË°åÂØπÊØî</p>
                                </div>
                            </div>
                        </template>
                        <template x-if="analyzerResult || compareMode">
                            <div>
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="text-lg font-bold text-green-700">
                                        <span x-text="compareMode ? 'ËÆ≠ÁªÉÊõ≤Á∫øÂØπÊØî' : (analyzerResult.training_sessions && analyzerResult.training_sessions.length > 1 ? (analyzerResult.training_sessions[currentSessionIndex]?.config?.model_name || 'Êú™Áü•Ê®°Âûã') + ' - ËÆ≠ÁªÉÊõ≤Á∫ø' : (analyzerResult.config?.model_name || 'Êú™Áü•Ê®°Âûã') + ' - ËÆ≠ÁªÉÊõ≤Á∫ø')"></span>
                                    </h3>
                                    <template x-if="analyzerResult.training_sessions && analyzerResult.training_sessions.length > 1">
                                <div class="flex items-center space-x-2">
                                            <label class="text-sm text-gray-600">ÈÄâÊã©ËÆ≠ÁªÉ:</label>
                                            <select x-model="currentSessionIndex" @change="updateCharts()" class="px-3 py-1 border border-gray-300 rounded-lg">
                                                <template x-for="(session, idx) in analyzerResult.training_sessions" :key="idx">
                                                    <option :value="idx" x-text="'ËÆ≠ÁªÉ ' + (idx+1) + ' - ' + (session.config?.model_name || 'Êú™Áü•')"></option>
                                                </template>
                                            </select>
                                        </div>
                                        <div class="flex items-center ml-3">
                                            <button @click="openMarkdownModal()" class="px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                                                üìã ËÆ≠ÁªÉË°®Ê†º
                                            </button>
                                        </div>
                                    </template>
                                </div>
                                <div class="h-80">
                                    <canvas id="trainingCurveChart"></canvas>
                                </div>
                                <!-- ËÆ≠ÁªÉË°®Ê†º Markdown ÂºπÁ™ó -->
                                <div x-show="showMarkdownModal" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[70]" @click.self="showMarkdownModal = false">
                                    <div class="bg-white rounded-xl shadow-2xl w-full max-w-4xl">
                                        <div class="border-b border-gray-200 px-5 py-4 flex items-center justify-between">
                                            <h3 class="text-lg font-bold text-gray-800">ËÆ≠ÁªÉË°®Ê†ºÔºàMarkdownÔºâ</h3>
                                            <button @click="showMarkdownModal = false" class="text-gray-400 hover:text-gray-600">
                                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                                </svg>
                                            </button>
                                        </div>
                                        <div class="p-4">
                                            <textarea x-model="markdownContent" class="w-full h-64 border border-gray-200 rounded-lg p-3 font-mono text-sm" spellcheck="false"></textarea>
                                        </div>
                                        <div class="border-t border-gray-200 px-5 py-4 flex justify-end space-x-3">
                                            <button @click="showMarkdownModal = false" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm">ÂÖ≥Èó≠</button>
                                            <button @click="saveMarkdownToServer()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm">‰øùÂ≠òÂà∞ training_excel.md</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- ÂØπÊØîÊ®°Âºè‰∏ãÊòæÁ§∫ÂØπÊØîÁªüËÆ° -->
                                <template x-if="compareMode">
                                    <div class="mt-4 p-4 bg-violet-50 rounded-lg border border-violet-200">
                                        <h4 class="font-bold text-violet-700 mb-3">üìä ÂØπÊØîÁªüËÆ°</h4>
                                        <div class="grid gap-3">
                                            <template x-for="(record, idx) in compareData" :key="idx">
                                                <div class="flex items-center justify-between p-2 bg-white rounded-lg border border-violet-100">
                                                    <span class="font-medium text-gray-700" x-text="record.model_name"></span>
                                                    <div class="flex items-center space-x-4 text-sm">
                                                        <span class="text-gray-500">ÊúÄ‰Ω≥Loss: <span class="font-bold text-green-600" x-text="(record.best_val_loss || record.statistics?.min_loss)?.toFixed(6) || 'N/A'"></span></span>
                                                        <span class="text-gray-500">Epoch: <span class="font-bold" x-text="record.best_epoch || record.statistics?.best_epoch || 'N/A'"></span></span>
                                                    </div>
                                                </div>
                                            </template>
                                        </div>
                                    </div>
                                </template>

                                <!-- ÁªüËÆ°‰ø°ÊÅØÔºàÈùûÂØπÊØîÊ®°ÂºèÔºâ -->
                                <div x-show="!compareMode" class="mt-4 p-4 bg-green-50 rounded-lg border border-green-200">
                                    <h4 class="font-bold text-green-700 mb-2">ÁªüËÆ°‰ø°ÊÅØ</h4>
                                    <div class="grid grid-cols-4 gap-4 text-sm">
                                        <div><span class="text-gray-600">ÊÄªEpochÊï∞:</span> <span class="font-bold" x-text="currentStats.total_epochs"></span></div>
                                        <div><span class="text-gray-600">ÊúÄÂ∞èLoss:</span> <span class="font-bold text-green-600" x-text="currentStats.min_loss?.toFixed(6) + ' (Epoch ' + currentStats.best_epoch + ')'"></span></div>
                                        <div><span class="text-gray-600">ÊúÄÂ§ßLoss:</span> <span class="font-bold" x-text="currentStats.max_loss?.toFixed(6)"></span></div>
                                        <div><span class="text-gray-600">Âπ≥ÂùáLoss:</span> <span class="font-bold" x-text="currentStats.avg_loss?.toFixed(6)"></span></div>
                                    </div>
                                </div>

                                <!-- ËÆ≠ÁªÉÂèÇÊï∞Ë°®Ê†ºÔºöÊîØÊåÅÂçïÊù°ÂíåÂ§öÊù°ÊòæÁ§∫ -->
                                <div class="mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200">
                                    <h4 class="font-bold text-blue-700 mb-3">‚öôÔ∏è ËÆ≠ÁªÉÂèÇÊï∞ÈÖçÁΩÆ</h4>
                                    <div class="overflow-x-auto">
                                        <table class="w-full border-collapse text-sm">
                                            <thead>
                                                <tr class="bg-blue-50">
                                                    <th class="border border-blue-200 px-3 py-2 text-left">Ê®™ËΩ¥ÂàÜÁ±ª - Ê®°ÂûãÂêçÁß∞</th>
                                                    <th class="border border-blue-200 px-3 py-2 text-left">ËÆ≠ÁªÉÈõÜÊï∞Èáè</th>
                                                    <th class="border border-blue-200 px-3 py-2 text-left">epoch</th>
                                                    <th x-show="hasRepeatData()" class="border border-blue-200 px-3 py-2 text-left">repeat</th>
                                                    <th class="border border-blue-200 px-3 py-2 text-left">save epoch</th>
                                                    <th class="border border-blue-200 px-3 py-2 text-left">rank</th>
                                                    <th class="border border-blue-200 px-3 py-2 text-left">steps</th>
                                                    <th class="border border-blue-200 px-3 py-2 text-left">ËÆ≠ÁªÉÂ∫ïÊ®°</th>
                                                    <th class="border border-blue-200 px-3 py-2 text-left">Â≠¶‰π†Áéá</th>
                                                    <th class="border border-blue-200 px-3 py-2 text-left">ËÆ≠ÁªÉÊó∂Èó¥</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Â§öÈÄâÂØπÊØîÊó∂ÊòæÁ§∫Â§öË°å -->
                                                <template x-if="selectedRecordIds && selectedRecordIds.length > 0 && compareData && compareData.length > 0">
                                                    <template x-for="rec in compareData" :key="rec.id">
                                                        <tr class="bg-white">
                                                            <td class="border border-blue-200 px-3 py-2" x-text="rec.model_name || rec.config?.model_name || '-'"></td>
                                                            <td class="border border-blue-200 px-3 py-2" x-text="rec.dataset_count != null ? rec.dataset_count : ((rec.train_data_dir || rec.config?.train_data_dir || '-').split(/[/\\\\]/).pop())"></td>
                                                            <td class="border border-blue-200 px-3 py-2" x-text="rec.num_epochs || rec.config?.num_train_epochs || rec.total_trained_epochs || '-'"></td>
                                                            <td x-show="hasRepeatData()" class="border border-blue-200 px-3 py-2" x-text="rec.repeats || rec.config?.repeats || ''"></td>
                                                            <td class="border border-blue-200 px-3 py-2" x-text="rec.save_model_epochs || rec.config?.save_model_epochs || '-'"></td>
                                                            <td class="border border-blue-200 px-3 py-2" x-text="rec.rank || rec.config?.rank || '-'"></td>
                                                            <td class="border border-blue-200 px-3 py-2" x-text="rec.steps || rec.config?.steps || '-'"></td>
                                                            <td class="border border-blue-200 px-3 py-2" x-text="(rec.pretrained_model_name_or_path || rec.config?.pretrained_model_name_or_path || rec.config?.pretrained_model || '').split(/[/\\\\]/).pop() || '-'"></td>
                                                            <td class="border border-blue-200 px-3 py-2" x-text="rec.learning_rate || rec.config?.learning_rate || '-'"></td>
                                                            <td class="border border-blue-200 px-3 py-2" x-text="rec.training_time || rec.config?.training_time || '-'"></td>
                                                        </tr>
                                                    </template>
                                                </template>

                                                <!-- ÂçïÊù°/ÂΩìÂâçÂàÜÊûêÊó∂ÊòæÁ§∫ÂçïË°å -->
                                                <template x-if="!selectedRecordIds || selectedRecordIds.length === 0">
                                                    <tr class="bg-white">
                                                        <td class="border border-blue-200 px-3 py-2" x-text="getCurrentConfig()?.model_name || '-'"></td>
                                                        <td class="border border-blue-200 px-3 py-2" x-text="getDatasetCount()"></td>
                                                        <td class="border border-blue-200 px-3 py-2" x-text="getCurrentConfig()?.num_train_epochs || '-'"></td>
                                                        <td x-show="hasRepeatData()" class="border border-blue-200 px-3 py-2" x-text="getCurrentConfig()?.repeats || ''"></td>
                                                        <td class="border border-blue-200 px-3 py-2" x-text="getCurrentConfig()?.save_model_epochs || '-'"></td>
                                                        <td class="border border-blue-200 px-3 py-2" x-text="getCurrentConfig()?.rank || '-'"></td>
                                                        <td class="border border-blue-200 px-3 py-2" x-text="getTotalSteps()"></td>
                                                        <td class="border border-blue-200 px-3 py-2" x-text="getBaseModelName()"></td>
                                                        <td class="border border-blue-200 px-3 py-2" x-text="getCurrentConfig()?.learning_rate || '-'"></td>
                                                        <td class="border border-blue-200 px-3 py-2" x-text="getTrainingTime()"></td>
                                                    </tr>
                                                </template>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- AIÂª∫ËÆÆÂå∫ÂüüÔºàÊï¥ÂêàÂà∞ËÆ≠ÁªÉÊõ≤Á∫øÈ°µÈù¢ÔºåÈùûÂØπÊØîÊ®°ÂºèÔºâ -->
                                <div x-show="!compareMode" class="mt-6 border-t border-gray-200 pt-6">
                                    <div class="flex items-center justify-between mb-4">
                                        <h4 class="font-bold text-green-700 flex items-center space-x-2">
                                            <span>ü§ñ</span>
                                            <span>AI ËÆ≠ÁªÉÂàÜÊûê‰∏é‰ºòÂåñÂª∫ËÆÆ</span>
                                        </h4>
                                        <button @click="aiAnalyzeTraining()" :disabled="isAiAnalyzing" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2">
                                            <template x-if="isAiAnalyzing">
                                                <svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                                </svg>
                                            </template>
                                            <span x-text="isAiAnalyzing ? 'ÂàÜÊûê‰∏≠...' : 'üîç AIÂàÜÊûê'"></span>
                                        </button>
                                    </div>
                                    
                                    <template x-if="!aiAnalysisResult && !isAiAnalyzing">
                                        <div class="p-6 bg-gray-50 rounded-lg text-center text-gray-400">
                                            <span class="text-2xl mb-2 block">‚ú®</span>
                                            <p>ÁÇπÂáª"AIÂàÜÊûê"ÊåâÈíÆÔºåËé∑Âèñ‰∏ì‰∏öÁöÑËÆ≠ÁªÉ‰ºòÂåñÂª∫ËÆÆ</p>
                                        </div>
                                    </template>
                                    
                                    <template x-if="isAiAnalyzing">
                                        <div class="p-6 bg-gray-50 rounded-lg text-center">
                                            <div class="flex justify-center mb-3">
                                                <div class="w-2 h-2 bg-green-500 rounded-full animate-bounce mx-1" style="animation-delay: 0ms;"></div>
                                                <div class="w-2 h-2 bg-green-500 rounded-full animate-bounce mx-1" style="animation-delay: 150ms;"></div>
                                                <div class="w-2 h-2 bg-green-500 rounded-full animate-bounce mx-1" style="animation-delay: 300ms;"></div>
                                            </div>
                                            <p class="text-gray-600 text-sm">AI Ê≠£Âú®ÂàÜÊûêËÆ≠ÁªÉÊï∞ÊçÆ...</p>
                                        </div>
                                    </template>
                                    
                                    <template x-if="aiAnalysisResult">
                                        <div class="prose prose-green max-w-none select-text">
                                            <div class="bg-green-50 border border-green-200 rounded-lg p-4 select-text cursor-text" x-html="marked.parse(aiAnalysisResult)"></div>
                                        </div>
                                    </template>
                                </div>
                                
                                <!-- Top10 ÂàÜÊûêÂå∫ÂüüÔºàÊï¥ÂêàÂà∞ËÆ≠ÁªÉÊõ≤Á∫øÈ°µÈù¢ÔºåÈùûÂØπÊØîÊ®°ÂºèÔºâ -->
                                <div x-show="!compareMode" class="mt-6 border-t border-gray-200 pt-6">
                                    <h4 class="font-bold text-green-700 mb-4">üèÜ Ââç10‰∏™ÊúÄ‰ºòEpochÂàÜÊûê</h4>
                                    <div class="h-64 mb-4">
                                        <canvas id="top10Chart"></canvas>
                                    </div>
                                    <table class="w-full border-collapse text-sm">
                                        <thead>
                                            <tr class="bg-green-50">
                                                <th class="border border-gray-200 px-3 py-2 text-left">ÊéíÂêç</th>
                                                <th class="border border-gray-200 px-3 py-2 text-left">Epoch</th>
                                                <th class="border border-gray-200 px-3 py-2 text-left">Val Loss</th>
                                                <th class="border border-gray-200 px-3 py-2 text-left">Áõ∏ÂØπÊúÄ‰Ω≥</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <template x-for="(item, idx) in currentStats.top_10" :key="idx">
                                                <tr :class="idx === 0 ? 'bg-green-100' : ''">
                                                    <td class="border border-gray-200 px-3 py-2" x-text="idx + 1"></td>
                                                    <td class="border border-gray-200 px-3 py-2" x-text="item.epoch"></td>
                                                    <td class="border border-gray-200 px-3 py-2" x-text="item.val_loss.toFixed(10)"></td>
                                                    <td class="border border-gray-200 px-3 py-2" x-text="idx === 0 ? '0.000000' : '+' + (item.val_loss - currentStats.top_10[0].val_loss).toFixed(6)"></td>
                                                </tr>
                                            </template>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </template>
                    </div>

                    <!-- ÂéÜÂè≤ËÆ∞ÂΩïÊ†áÁ≠æÈ°µ -->
                    <div x-show="analyzerSubTab === 'history'" class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold text-green-700">ËÆ≠ÁªÉÊä•Âëä - ÂéÜÂè≤ËÆ∞ÂΩï <span class="text-sm text-gray-500">(<span x-text="analyzerRecords.length"></span> Êù°)</span></h3>
                            <div class="flex items-center space-x-2">
                                <template x-if="selectedRecordIds.length >= 2">
                                    <button @click="compareRecords()" class="px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors">
                                        üìä ÂØπÊØîÊõ≤Á∫ø (<span x-text="selectedRecordIds.length"></span>)
                                    </button>
                                </template>
                                <template x-if="selectedRecordIds.length > 0 && selectedRecordIds.length < 2">
                                    <span class="text-sm text-gray-500">ËØ∑Ëá≥Â∞ëÈÄâÊã©2Êù°ËÆ∞ÂΩïËøõË°åÂØπÊØî</span>
                                </template>
                                <button @click="bulkDeleteSelectedRecords()" :disabled="selectedRecordIds.length === 0" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
                                    üóëÔ∏è Âà†Èô§ÊâÄÈÄâ (<span x-text="selectedRecordIds.length"></span>)
                                </button>
                                <button @click="loadAnalyzerRecords()" class="px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors">
                                    üîÑ Âà∑Êñ∞
                                </button>
                            </div>
                        </div>
                        <table class="w-full border-collapse">
                            <thead>
                                    <tr class="bg-green-50">
                                    <th class="border border-gray-200 px-3 py-2 text-center w-12">
                                        <!-- ÂÖ®ÈÄâ / ÂèñÊ∂àÂÖ®ÈÄâ -->
                                        <input type="checkbox"
                                               :checked="analyzerRecords && analyzerRecords.length > 0 && selectedRecordIds.length === analyzerRecords.length"
                                               @change="toggleSelectAll()"
                                               class="w-4 h-4 text-violet-600 rounded focus:ring-violet-500">
                                    </th>
                                    <th class="border border-gray-200 px-4 py-2 text-left">Ê®°ÂûãÂêçÁß∞</th>
                                    <th class="border border-gray-200 px-4 py-2 text-left">ÂàÜÊûêÊó∂Èó¥</th>
                                    <th class="border border-gray-200 px-4 py-2 text-left">ÊúÄ‰Ω≥Loss</th>
                                    <th class="border border-gray-200 px-4 py-2 text-left">EpochÊï∞</th>
                                    <th class="border border-gray-200 px-4 py-2 text-left">ÊúÄ‰Ω≥Epoch</th>
                                    <th class="border border-gray-200 px-4 py-2 text-left">Êìç‰Ωú</th>
                                </tr>
                            </thead>
                            <tbody>
                                <template x-for="record in analyzerRecords" :key="record.id">
                                    <tr class="hover:bg-gray-50" :class="selectedRecordIds.includes(record.id) ? 'bg-violet-50' : ''">
                                        <td class="border border-gray-200 px-3 py-2 text-center">
                                            <input type="checkbox" 
                                                   :checked="selectedRecordIds.includes(record.id)"
                                                   @change="toggleSelectRecord(record.id)"
                                                   class="w-4 h-4 text-violet-600 rounded focus:ring-violet-500">
                                        </td>
                                        <td class="border border-gray-200 px-4 py-2" x-text="record.model_name"></td>
                                        <td class="border border-gray-200 px-4 py-2" x-text="record.analysis_date"></td>
                                        <td class="border border-gray-200 px-4 py-2" x-text="record.best_val_loss?.toFixed(6) || 'N/A'"></td>
                                        <td class="border border-gray-200 px-4 py-2" x-text="record.num_epochs || 'N/A'"></td>
                                        <td class="border border-gray-200 px-4 py-2" x-text="record.best_epoch"></td>
                                        <td class="border border-gray-200 px-4 py-2">
                                            <button @click="viewRecord(record.id)" class="px-2 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600">ËØ¶ÊÉÖ</button>
                                        </td>
                                    </tr>
                                </template>
                            </tbody>
                        </table>
                        <template x-if="analyzerRecords.length === 0">
                            <div class="text-center text-gray-400 py-8">ÊöÇÊó†ÂéÜÂè≤ËÆ∞ÂΩï</div>
                        </template>
                    </div>
                </div>
            </div>

            <!-- ==================== Chat ÂØπËØùÊ®°Âºè ==================== -->
            <div x-show="modelMode === 'chat'" class="flex-1 overflow-hidden bg-gray-50">
                <div class="h-full flex flex-col p-4">
                    <div class="flex-1 bg-white rounded-xl shadow-sm border border-gray-200 flex flex-col overflow-hidden">
                        <!-- ËÅäÂ§©Â§¥ÈÉ® -->
                        <div class="px-4 py-3 border-b border-gray-200 bg-gradient-to-r from-violet-50 to-purple-50">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <span class="text-lg">üí¨</span>
                                    <h3 class="font-medium text-gray-800" x-text="getCurrentChatTitle()"></h3>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button @click="clearCurrentChat()" class="px-3 py-1.5 text-xs bg-gray-100 hover:bg-gray-200 text-gray-600 rounded-lg transition-colors">
                                        üóë Ê∏ÖÁ©∫ÂØπËØù
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ËÅäÂ§©Ê∂àÊÅØÂå∫Âüü -->
                        <div class="flex-1 overflow-y-auto p-4 space-y-4" id="chatMessages" x-ref="chatMessages">
                            <template x-if="chatMessages.length === 0">
                                <div class="h-full flex items-center justify-center text-gray-400">
                                    <div class="text-center">
                                        <span class="text-4xl mb-4 block">üí¨</span>
                                        <p class="text-sm">ÂºÄÂßã‰∏é AI ÂØπËØùÂêßÔºÅ</p>
                                        <p class="text-xs mt-2 text-gray-300">‰ΩøÁî®Â∑¶‰æßÈÄâÊã©ÁöÑÊ®°ÂûãËøõË°åÂØπËØù</p>
                                    </div>
                                </div>
                            </template>
                            <template x-for="(msg, index) in chatMessages" :key="index">
                                <div :class="msg.role === 'user' ? 'flex justify-end' : 'flex justify-start'">
                                    <div :class="msg.role === 'user' ? 'bg-violet-600 text-white rounded-2xl rounded-br-md' : 'bg-gray-100 text-gray-800 rounded-2xl rounded-bl-md'" class="max-w-[80%] px-4 py-3 shadow-sm">
                                        <div class="text-sm whitespace-pre-wrap" x-text="msg.content"></div>
                                        <div :class="msg.role === 'user' ? 'text-violet-200' : 'text-gray-400'" class="text-xs mt-1" x-text="msg.time"></div>
                                    </div>
                                </div>
                            </template>
                            <!-- Âä†ËΩΩ‰∏≠ÊåáÁ§∫Âô® -->
                            <div x-show="isChatLoading" class="flex justify-start">
                                <div class="bg-gray-100 text-gray-800 rounded-2xl rounded-bl-md px-4 py-3 shadow-sm">
                                    <div class="flex items-center space-x-2">
                                        <div class="flex space-x-1">
                                            <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0ms;"></div>
                                            <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 150ms;"></div>
                                            <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 300ms;"></div>
                                        </div>
                                        <span class="text-xs text-gray-500">AI Ê≠£Âú®ÊÄùËÄÉ...</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ËæìÂÖ•Âå∫Âüü -->
                        <div class="border-t border-gray-200 p-4 bg-gray-50">
                            <div class="flex space-x-3">
                                <textarea 
                                    x-model="chatInput" 
                                    @keydown.enter="handleChatEnter($event)"
                                    placeholder="ËæìÂÖ•Ê∂àÊÅØ... (Enter ÂèëÈÄÅ, Shift+Enter Êç¢Ë°å)"
                                    rows="2"
                                    class="flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-violet-500 focus:border-transparent resize-none text-sm"
                                    :disabled="isChatLoading"
                                ></textarea>
                                <button 
                                    @click="sendChatMessage()" 
                                    :disabled="!chatInput.trim() || isChatLoading"
                                    class="px-6 py-3 bg-violet-600 text-white rounded-xl hover:bg-violet-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"
                                >
                                    <span>ÂèëÈÄÅ</span>
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÂçïÂõæÂØºÂá∫ÂØπËØùÊ°Ü -->
    <div x-show="showImageExportDialog" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md">
            <div class="border-b border-gray-200 px-6 py-4 flex items-center justify-between">
                <h2 class="text-lg font-bold text-gray-800">üì¶ ÂØºÂá∫Êï∞ÊçÆÈõÜ</h2>
                <button @click="showImageExportDialog = false" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div class="p-6 space-y-4">
                <div class="bg-blue-50 rounded-lg p-3 mb-4">
                    <p class="text-sm text-blue-800">
                        <span class="font-medium">Â∑≤ÈÄâÊã© <span x-text="selectedCount"></span> Âº†ÂõæÁâá</span>
                    </p>
                    <p class="text-xs text-blue-600 mt-1">ÂõæÁâáÂíåÊñáÊú¨Êñá‰ª∂Â∞Ü‰ΩøÁî®Áõ∏ÂêåÁöÑÊñá‰ª∂ÂêçÔºàÈªòËÆ§Ê®°ÂºèÔºâ</p>
                </div>
                
                <!-- ÂõæÁâáÊ†ºÂºèÈÄâÊã© -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ÂõæÁâáÊ†ºÂºè</label>
                    <div class="flex space-x-4">
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" x-model="imageExportFormat" value="png" class="text-violet-600 focus:ring-violet-500">
                            <span class="text-sm text-gray-700">PNG (Êó†Êçü)</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" x-model="imageExportFormat" value="jpg" class="text-violet-600 focus:ring-violet-500">
                            <span class="text-sm text-gray-700">JPG (ÂéãÁº©)</span>
                        </label>
                    </div>
                </div>
                
                <!-- ÂØºÂá∫Á±ªÂûãÈÄâÊã© -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ÂØºÂá∫ÊñπÂºè</label>
                    <div class="flex space-x-4">
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" x-model="imageExportOutputType" value="zip" class="text-violet-600 focus:ring-violet-500">
                            <span class="text-sm text-gray-700">ZIP ÂéãÁº©ÂåÖ</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" x-model="imageExportOutputType" value="folder" class="text-violet-600 focus:ring-violet-500">
                            <span class="text-sm text-gray-700">Êñá‰ª∂Â§π</span>
                        </label>
                    </div>
                </div>
                
                <!-- ÂØºÂá∫Ë∑ØÂæÑ -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <span x-text="imageExportOutputType === 'zip' ? 'ÂØºÂá∫Ë∑ØÂæÑÔºàÂèØÈÄâÔºâ' : 'ÂØºÂá∫Êñá‰ª∂Â§πË∑ØÂæÑÔºàÂèØÈÄâÔºâ'"></span>
                    </label>
                    <div class="flex space-x-2">
                        <input 
                            type="text" 
                            x-model="imageExportPath" 
                            :placeholder="imageExportOutputType === 'zip' ? 'ÁïôÁ©∫ÂàôÂØºÂá∫Âà∞ training_datas ÁõÆÂΩï' : 'ÁïôÁ©∫ÂàôÂØºÂá∫Âà∞ training_datas ÁõÆÂΩï'"
                            class="flex-1 px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-violet-500 focus:border-violet-500"
                        >
                        <button 
                            @click="browseImageExportPath()" 
                            class="px-3 py-2 text-sm bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors whitespace-nowrap"
                            title="ÊµèËßàÊñá‰ª∂Â§π"
                        >
                            üìÅ ÊµèËßà
                        </button>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">
                        <span x-show="imageExportOutputType === 'zip'">Á§∫‰æã: D:\datasets\my_dataset.zip</span>
                        <span x-show="imageExportOutputType === 'folder'">Á§∫‰æã: D:\datasets\my_dataset</span>
                    </p>
                </div>
            </div>
            
            <div class="border-t border-gray-200 px-6 py-4 flex justify-end space-x-3">
                <button @click="showImageExportDialog = false" class="px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                    ÂèñÊ∂à
                </button>
                <button @click="confirmImageExport()" class="px-4 py-2 text-sm bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors">
                    ÂºÄÂßãÂØºÂá∫
                </button>
            </div>
        </div>
    </div>

    <!-- ÂØºÂá∫ÊàêÂäüÂØπËØùÊ°Ü -->
    <div x-show="showExportSuccessDialog" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md">
            <div class="border-b border-gray-200 px-6 py-4">
                <h2 class="text-lg font-bold text-green-600">‚úÖ ÂØºÂá∫ÊàêÂäü</h2>
            </div>
            <div class="p-6">
                <p class="text-sm text-gray-700 mb-4">Êï∞ÊçÆÈõÜÂ∑≤ÊàêÂäüÂØºÂá∫Âà∞:</p>
                <div class="bg-gray-50 rounded-lg p-3 mb-4">
                    <p class="text-sm text-gray-800 font-mono break-all" x-text="exportedFilePath"></p>
                </div>
            </div>
            <div class="border-t border-gray-200 px-6 py-4 flex justify-end space-x-3">
                <button @click="openExportFolder()" class="px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                    üìÇ ÊâìÂºÄÊñá‰ª∂Â§π
                </button>
                <button @click="showExportSuccessDialog = false" class="px-4 py-2 text-sm bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors">
                    Á°ÆÂÆö
                </button>
            </div>
        </div>
    </div>

    <!-- ÁºìÂ≠òÁÆ°ÁêÜÂØπËØùÊ°Ü -->
    <div x-show="showCacheManagerDialog" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" @click.self="showCacheManagerDialog = false">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[80vh] flex flex-col">
            <div class="border-b border-gray-200 px-6 py-4 flex items-center justify-between">
                <h2 class="text-lg font-bold text-gray-800">üì¶ ÁºìÂ≠òÁÆ°ÁêÜ</h2>
                <button @click="showCacheManagerDialog = false" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div class="p-6 overflow-y-auto flex-1">
                <!-- Êìç‰ΩúÊåâÈíÆ -->
                <div class="flex flex-wrap gap-2 mb-4">
                    <button @click="refreshCacheList()" class="px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                        üîÑ Âà∑Êñ∞ÂàóË°®
                    </button>
                    <button @click="importAllCache()" class="px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
                        üì• ÂØºÂÖ•ÁºìÂ≠ò
                    </button>
                    <button @click="exportAllCache()" :disabled="tempCacheList.length === 0" class="px-4 py-2 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                        üì§ ‰∏ÄÈîÆÂØºÂá∫
                    </button>
                    <button @click="clearAllCache()" :disabled="tempCacheList.length === 0" class="px-4 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                        üóëÔ∏è ‰∏ÄÈîÆÊ∏ÖÁ©∫
                    </button>
                </div>

                <!-- ÁºìÂ≠òÂàóË°® -->
                <div class="space-y-2">
                    <template x-if="tempCacheList.length === 0">
                        <div class="text-center py-8 text-gray-400">
                            <p class="text-sm">ÊöÇÊó†ÁºìÂ≠òËÆ∞ÂΩï</p>
                            <p class="text-xs mt-2">ÁÇπÂáª"‰∏¥Êó∂‰øùÂ≠ò"ÊåâÈíÆÂàõÂª∫ÁºìÂ≠ò</p>
                        </div>
                    </template>
                    
                    <template x-for="cache in tempCacheList" :key="cache.name">
                        <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors">
                            <div class="flex items-start justify-between">
                                <div class="flex-1">
                                    <div class="flex items-center space-x-2 mb-2">
                                        <h3 class="font-medium text-gray-800" x-text="cache.display_name"></h3>
                                        <span class="text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded" x-text="`${cache.pair_count} ÁªÑ`"></span>
                                    </div>
                                    <p class="text-xs text-gray-500 mb-1">
                                        ‰øùÂ≠òÊó∂Èó¥: <span x-text="cache.created_at"></span>
                                    </p>
                                    <p class="text-xs text-gray-500">
                                        Â§ßÂ∞è: <span x-text="cache.size"></span>
                                    </p>
                                </div>
                                <div class="flex flex-col space-y-2 ml-4">
                                    <button @click="loadCacheFromManager(cache.name)" class="px-3 py-1 text-xs bg-violet-600 text-white rounded hover:bg-violet-700 transition-colors">
                                        üìÇ ÊÅ¢Â§ç
                                    </button>
                                    <button @click="exportSingleCache(cache.name)" class="px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 transition-colors">
                                        üì§ ÂØºÂá∫
                                    </button>
                                    <button @click="deleteSingleCache(cache.name)" class="px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 transition-colors">
                                        üóë Âà†Èô§
                                    </button>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
            </div>

            <div class="border-t border-gray-200 px-6 py-4 flex justify-between items-center bg-gray-50">
                <p class="text-xs text-gray-500">ÁºìÂ≠ò‰ΩçÁΩÆ: training_edit_tmp/__temp_cache__</p>
                <button @click="showCacheManagerDialog = false" class="px-4 py-2 text-sm bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors">
                    ÂÖ≥Èó≠
                </button>
            </div>
        </div>
    </div>

    <!-- ÂØºÂá∫ÂØπËØùÊ°Ü -->
    <div x-show="showExportDialog" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md">
            <div class="border-b border-gray-200 px-6 py-4 flex items-center justify-between">
                <h2 class="text-lg font-bold text-gray-800">üì¶ ÂØºÂá∫ËÆ≠ÁªÉÊï∞ÊçÆÈõÜ</h2>
                <button @click="showExportDialog = false" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div class="p-6 space-y-4">
                <!-- ÂØºÂá∫Á±ªÂûãÈÄâÊã© -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ÂØºÂá∫Ê†ºÂºè</label>
                    <div class="flex space-x-4">
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" x-model="exportOutputType" value="zip" class="text-violet-600 focus:ring-violet-500">
                            <span class="text-sm text-gray-700">ZIP ÂéãÁº©ÂåÖ</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" x-model="exportOutputType" value="folder" class="text-violet-600 focus:ring-violet-500">
                            <span class="text-sm text-gray-700">Êñá‰ª∂Â§π</span>
                        </label>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2" x-text="exportOutputType === 'zip' ? 'ÂéãÁº©ÂåÖÂêçÁß∞' : 'Êñá‰ª∂Â§πÂêçÁß∞'"></label>
                    <div class="flex items-center space-x-2">
                        <input type="text" x-model="exportFileName" placeholder="training_dataset" class="flex-1 px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-violet-500 focus:border-violet-500">
                        <span x-show="exportOutputType === 'zip'" class="text-sm text-gray-500">.zip</span>
                    </div>
                </div>
                <!-- Â∑≤ÁßªÈô§ÔºöÈáçÂ§çÁöÑ‚ÄúÊåâÊñá‰ª∂ÂêçÂÖ≥ÈîÆÂ≠óËøáÊª§‚Äù‰∏éÊñá‰ª∂Á±ªÂûãÈÄâÊã©Ôºà‰∏é‚ÄúÊåâÊñá‰ª∂ÂêçÂÖ≥ÈîÆÂ≠óÂØºÂá∫‚ÄùÊ®°ÂºèÈáçÂ§çÔºâ -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ÂØºÂá∫ÁõÆÂΩï</label>
                    <div class="flex space-x-2">
                        <input type="text" x-model="exportOutputDir" placeholder="ÈÄâÊã©ÂØºÂá∫ÁõÆÂΩïÊàñÁõ¥Êé•ËæìÂÖ•Ë∑ØÂæÑ..." class="flex-1 px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-violet-500 focus:border-violet-500">
                        <button @click="selectExportDir()" class="px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors text-sm">
                            üìÇ ÊµèËßà
                        </button>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">‰∏çÈÄâÊã©ÂàôÂØºÂá∫Âà∞Á®ãÂ∫èÁõÆÂΩï</p>
                </div>
                <div x-show="exportNamingMode !== 'namefilter'">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ÂõæÁâáÊ†ºÂºè</label>
                        <div class="flex space-x-4">
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="radio" x-model="exportImageFormat" value="png" class="text-violet-600 focus:ring-violet-500">
                                <span class="text-sm text-gray-700">PNG (Êó†Êçü)</span>
                            </label>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="radio" x-model="exportImageFormat" value="jpg" class="text-violet-600 focus:ring-violet-500">
                                <span class="text-sm text-gray-700">JPG (ÂéãÁº©)</span>
                            </label>
                        </div>
                    </div>
                </div>
                <!-- ÂëΩÂêçÊ®°ÂºèÈÄâÊã© -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ÂëΩÂêçÊ®°Âºè</label>
                    <div class="flex flex-wrap gap-3">
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" x-model="exportNamingMode" value="default" class="text-violet-600 focus:ring-violet-500">
                            <span class="text-sm text-gray-700">ÈªòËÆ§Ê®°Âºè</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" x-model="exportNamingMode" value="t2itrainer" class="text-violet-600 focus:ring-violet-500">
                            <span class="text-sm text-gray-700">T2itrainer</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" x-model="exportNamingMode" value="aitoolkit" class="text-violet-600 focus:ring-violet-500">
                            <span class="text-sm text-gray-700">AIToolkit</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" x-model="exportNamingMode" value="runinghub" class="text-violet-600 focus:ring-violet-500">
                            <span class="text-sm text-gray-700">RuningHub</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" x-model="exportNamingMode" value="namefilter" class="text-violet-600 focus:ring-violet-500">
                            <span class="text-sm text-gray-700">ÊåâÊñá‰ª∂ÂêçÂÖ≥ÈîÆÂ≠óÂØºÂá∫</span>
                        </label>
                    </div>
                </div>
                <!-- T2itrainer ÂëΩÂêçËÆæÁΩÆ -->
                <div x-show="exportNamingMode === 't2itrainer'" x-transition class="space-y-3 bg-purple-50 rounded-lg p-3">
                    <div class="grid grid-cols-3 gap-2">
                        <div>
                            <label class="block text-xs font-medium text-gray-600 mb-1">ÂéüÂõæ1ÂêéÁºÄ</label>
                            <input type="text" x-model="exportSuffixLeft" placeholder="R" class="w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-violet-500">
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-gray-600 mb-1">ÂéüÂõæ2ÂêéÁºÄ</label>
                            <input type="text" x-model="exportSuffixLeft2" placeholder="G" class="w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-violet-500">
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-gray-600 mb-1">ÁõÆÊ†áÂõæÂêéÁºÄ</label>
                            <input type="text" x-model="exportSuffixRight" placeholder="T" class="w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-violet-500">
                        </div>
                    </div>
                    <div class="flex items-center space-x-2">
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="checkbox" x-model="exportPrefixLetter" class="text-violet-600 focus:ring-violet-500">
                            <span class="text-sm text-gray-700">ÊòØÂê¶ÂâçÁΩÆÂ≠óÊØçÔºà‰æãÂ¶Ç: R_1, G_1, T_1Ôºâ</span>
                        </label>
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-gray-600 mb-1">TXTÊñá‰ª∂ÂëΩÂêçË∑üÈöè</label>
                        <div class="flex space-x-4">
                            <label class="flex items-center space-x-1 cursor-pointer">
                                <input type="radio" x-model="exportTxtFollows" value="left" class="text-violet-600 focus:ring-violet-500">
                                <span class="text-xs text-gray-700">ÂéüÂõæ1</span>
                            </label>
                            <label class="flex items-center space-x-1 cursor-pointer">
                                <input type="radio" x-model="exportTxtFollows" value="right" class="text-violet-600 focus:ring-violet-500">
                                <span class="text-xs text-gray-700">ÁõÆÊ†áÂõæ</span>
                            </label>
                        </div>
                    </div>
                    <p class="text-xs text-gray-500">
                        Á§∫‰æã: 1_R.png, 1_G.png, 1_T.png, 1_T.txt
                    </p>
                </div>
                <!-- AIToolkit ÂëΩÂêçËÆæÁΩÆ -->
                <div x-show="exportNamingMode === 'aitoolkit'" x-transition class="space-y-3 bg-blue-50 rounded-lg p-3">
                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <label class="block text-xs font-medium text-gray-600 mb-1">Áªü‰∏ÄÊñá‰ª∂ÂâçÁºÄ</label>
                            <input type="text" x-model="exportUnifiedFilePrefix" placeholder="T" class="w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-violet-500">
                            <p class="text-xs text-gray-400 mt-1">ÊâÄÊúâÊñá‰ª∂‰ΩøÁî®Áªü‰∏ÄÂâçÁºÄÂëΩÂêç</p>
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-gray-600 mb-1">Êñá‰ª∂Â§πÂâçÁºÄ</label>
                            <input type="text" x-model="exportFolderPrefix" placeholder="aitoolkit" class="w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-violet-500">
                            <p class="text-xs text-gray-400 mt-1">‰∏ªÊñá‰ª∂Â§πÂêçÁß∞</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-3 gap-2">
                        <div>
                            <label class="block text-xs font-medium text-gray-600 mb-1">ÂéüÂõæ1Êñá‰ª∂Â§πÂêç</label>
                            <input type="text" x-model="exportSuffixLeft" placeholder="R" class="w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-violet-500">
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-gray-600 mb-1">ÂéüÂõæ2Êñá‰ª∂Â§πÂêç</label>
                            <input type="text" x-model="exportSuffixLeft2" placeholder="G" class="w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-violet-500">
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-gray-600 mb-1">ÁõÆÊ†áÂõæÊñá‰ª∂Â§πÂêç</label>
                            <input type="text" x-model="exportSuffixRight" placeholder="T" class="w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-violet-500">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <label class="block text-xs font-medium text-gray-600 mb-1">TXTÂëΩÂêçË∑üÈöè</label>
                            <div class="flex space-x-3">
                                <label class="flex items-center space-x-1 cursor-pointer">
                                    <input type="radio" x-model="exportTxtFollows" value="left" class="text-violet-600 focus:ring-violet-500">
                                    <span class="text-xs text-gray-700">ÂéüÂõæ</span>
                                </label>
                                <label class="flex items-center space-x-1 cursor-pointer">
                                    <input type="radio" x-model="exportTxtFollows" value="right" class="text-violet-600 focus:ring-violet-500">
                                    <span class="text-xs text-gray-700">ÁõÆÊ†áÂõæ</span>
                                </label>
                            </div>
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-gray-600 mb-1">TXTÊîæÁΩÆÊñá‰ª∂Â§π</label>
                            <div class="flex space-x-3">
                                <label class="flex items-center space-x-1 cursor-pointer">
                                    <input type="radio" x-model="exportTxtFolderFollows" value="left" class="text-violet-600 focus:ring-violet-500">
                                    <span class="text-xs text-gray-700">ÂéüÂõæÂ§π</span>
                                </label>
                                <label class="flex items-center space-x-1 cursor-pointer">
                                    <input type="radio" x-model="exportTxtFolderFollows" value="right" class="text-violet-600 focus:ring-violet-500">
                                    <span class="text-xs text-gray-700">ÁõÆÊ†áÂõæÂ§π</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center space-x-2">
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="checkbox" x-model="exportPrefixLetter" class="text-violet-600 focus:ring-violet-500">
                            <span class="text-sm text-gray-700">ÊòØÂê¶ÂâçÁΩÆÂ≠óÊØçÔºà‰æãÂ¶Ç: R_1, G_1, T_1Ôºâ</span>
                        </label>
                    </div>
                    <p class="text-xs text-gray-500">
                        Á§∫‰æã: R/T_1.png, G/T_1.png, T/T_1.png, T/T_1.txt
                    </p>
                </div>
                <!-- RuningHub ÂëΩÂêçËÆæÁΩÆ -->
                <div x-show="exportNamingMode === 'runinghub'" x-transition class="space-y-3 bg-green-50 rounded-lg p-3">
                    <div class="grid grid-cols-2 gap-2">
                        <div>
                            <label class="block text-xs font-medium text-gray-600 mb-1">ÂéüÂõæÂêéÁºÄ</label>
                            <input type="text" x-model="exportRuninghubStart" placeholder="start" class="w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-violet-500">
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-gray-600 mb-1">ÁõÆÊ†áÂõæÂêéÁºÄ</label>
                            <input type="text" x-model="exportRuninghubEnd" placeholder="end" class="w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-violet-500">
                        </div>
                    </div>
                    <p class="text-xs text-gray-500">
                        Á§∫‰æã: 1_start.png, 1_end.png, 2_start.png, 2_end.png ...
                    </p>
                </div>
                <div class="bg-gray-50 rounded-lg p-3" x-show="exportNamingMode === 'default'">
                    <p class="text-xs text-gray-600">
                        <span class="font-medium">ÈªòËÆ§Ê†ºÂºèËØ¥ÊòéÔºö</span><br>
                        Êñá‰ª∂ÂëΩÂêçÔºö1_0.png + 1_1.png + 1_1.txt ...<br>
                        ÈÄÇÂêàÁõ¥Êé•Áî®‰∫é LoRA/Dreambooth ËÆ≠ÁªÉ
                    </p>
                </div>
                <!-- ÊåâÊñá‰ª∂ÂêçÂÖ≥ÈîÆÂ≠óÂØºÂá∫Ê®°ÂºèËÆæÁΩÆ -->
                <div x-show="exportNamingMode === 'namefilter'" x-cloak class="space-y-3 bg-yellow-50 rounded-lg p-3">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ÊåâÊñá‰ª∂ÂêçÂÖ≥ÈîÆÂ≠óËøáÊª§Ôºà‰ªÖÂú®Ê≠§Ê®°Âºè‰∏ãÊúâÊïàÔºâ</label>
                        <input type="text" x-model="exportFilterKeyword" placeholder="‰æãÂ¶Ç: R" class="w-full px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-violet-500 focus:border-violet-500">
                        <p class="text-xs text-gray-500 mt-1">ÈÄâ‰∏≠ÂêéÂè™ÂØºÂá∫Êñá‰ª∂ÂêçÂåÖÂê´ËØ•ÂÖ≥ÈîÆÂ≠óÁöÑÂõæÁâáÊàñÊñáÊú¨Ôºà‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜôÔºâ„ÄÇ</p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ÂØºÂá∫Êñá‰ª∂Á±ªÂûãÔºàÂèØÂ§öÈÄâÔºâ</label>
                        <div class="flex items-center space-x-4">
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="checkbox" x-model="exportFilterPNG" class="text-violet-600 focus:ring-violet-500">
                                <span class="text-sm text-gray-700">PNG</span>
                            </label>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="checkbox" x-model="exportFilterJPG" class="text-violet-600 focus:ring-violet-500">
                                <span class="text-sm text-gray-700">JPG</span>
                            </label>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="checkbox" x-model="exportFilterTXT" class="text-violet-600 focus:ring-violet-500">
                                <span class="text-sm text-gray-700">TXT</span>
                            </label>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">ÂãæÈÄâË¶ÅÂØºÂá∫ÁöÑÊ†ºÂºèÔºåÂèØ‰ª•Â§öÈÄâÔºõËã•‰∏çÂãæÈÄâÂàôÈªòËÆ§ÂØºÂá∫ PNG + TXT„ÄÇ</p>
                    </div>
                    <p class="text-xs text-gray-500">ËØ•Ê®°Âºè‰∏ã‰ºöÂøΩÁï•ÂÖ∂‰ªñÂëΩÂêçÁõ∏ÂÖ≥ËÆæÁΩÆÔºåÂØºÂá∫‰ª•ÂÖ≥ÈîÆÂ≠óÂåπÈÖç‰∏∫ÂáÜ„ÄÇ</p>
                </div>
                <div class="flex space-x-3 pt-2">
                    <button @click="showExportDialog = false" class="flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors">
                        ÂèñÊ∂à
                    </button>
                    <button @click="exportPairs()" class="flex-1 px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors font-medium">
                        ‚¨áÔ∏è ÂºÄÂßãÂØºÂá∫
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ÂØºÂá∫ÊàêÂäüÂºπÁ™óÔºàÂ∑≤ÁßªÈô§Ôºâ -->

    <!-- ‰øùÂ≠òÁºìÂ≠òÂºπÁ™óÔºàÂ∑≤ÁßªÈô§Ôºâ -->

    <!-- ËÆæÁΩÆÂºπÁ™ó -->
    <div x-show="showSettingsModal" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col">
            <!-- Ê†áÈ¢òÊ†è -->
            <div class="bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between">
                <h2 class="text-xl font-bold text-gray-800">‚öôÔ∏è ËÆæÁΩÆ‰∏≠ÂøÉ</h2>
                <button @click="showSettingsModal = false" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Tab ÂàáÊç¢ÊåâÈíÆ -->
            <div class="bg-gray-50 border-b border-gray-200 px-6 py-3">
                <div class="flex space-x-2">
                    <button @click="if(isLicensed) settingsTab = 'appearance'" 
                            :class="settingsTab === 'appearance' ? 'bg-violet-600 text-white shadow-md' : (isLicensed ? 'bg-white text-gray-700 hover:bg-gray-100 border border-gray-300' : 'bg-gray-100 text-gray-400 cursor-not-allowed')" 
                            class="px-4 py-2 rounded-lg transition-all font-medium text-sm" :disabled="!isLicensed">
                        üé® Â∫îÁî®ËÆæÁΩÆ
                    </button>
                    <button @click="if(isLicensed) settingsTab = 'apikey'" 
                            :class="settingsTab === 'apikey' ? 'bg-violet-600 text-white shadow-md' : (isLicensed ? 'bg-white text-gray-700 hover:bg-gray-100 border border-gray-300' : 'bg-gray-100 text-gray-400 cursor-not-allowed')" 
                            class="px-4 py-2 rounded-lg transition-all font-medium text-sm" :disabled="!isLicensed">
                        üîë API Key ÈÖçÁΩÆ
                    </button>
                    <button @click="settingsTab = 'license'" 
                            :class="settingsTab === 'license' ? 'bg-violet-600 text-white shadow-md' : 'bg-white text-gray-700 hover:bg-gray-100 border border-gray-300'" 
                            class="px-4 py-2 rounded-lg transition-all font-medium text-sm">
                        üßæ ÊøÄÊ¥ªÁ®ãÂ∫è
                    </button>
                </div>
            </div>

            <!-- ÂÜÖÂÆπÂå∫Âüü -->
            <div class="flex-1 overflow-y-auto p-6">
                <!-- Â∫îÁî®ËÆæÁΩÆ Tab -->
                <div x-show="settingsTab === 'appearance'" class="space-y-5">
                    <div class="bg-purple-50 border border-purple-200 rounded-lg p-3 mb-4">
                        <p class="text-sm text-purple-700">üé® Ëá™ÂÆö‰πâÂ∫îÁî®ÁöÑÂ§ñËßÇÂíå‰∏ªÈ¢òËÆæÁΩÆ</p>
                    </div>

                    <!-- ‰∏ªÈ¢òÂàáÊç¢ -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">‰∏ªÈ¢òÊ®°Âºè</label>
                        <div class="grid grid-cols-3 gap-3">
                            <button @click="setTheme('light')" 
                                    :class="theme === 'light' ? 'bg-purple-100 border-purple-500 text-purple-700 ring-2 ring-purple-500' : 'bg-white border-gray-300 text-gray-700 hover:border-purple-300'" 
                                    class="px-4 py-4 border-2 rounded-xl transition-all text-sm font-medium flex flex-col items-center space-y-2">
                                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                                </svg>
                                <span>ÊµÖËâ≤</span>
                                <span class="text-xs text-gray-500">Light</span>
                            </button>
                            <button @click="setTheme('dark')" 
                                    :class="theme === 'dark' ? 'bg-gray-800 border-gray-600 text-white ring-2 ring-gray-600' : 'bg-white border-gray-300 text-gray-700 hover:border-gray-400'" 
                                    class="px-4 py-4 border-2 rounded-xl transition-all text-sm font-medium flex flex-col items-center space-y-2">
                                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                                </svg>
                                <span>Ê∑±Ëâ≤</span>
                                <span class="text-xs text-gray-500">Dark</span>
                            </button>
                            <button @click="setTheme('blue')" 
                                    :class="theme === 'blue' ? 'bg-blue-900 border-blue-700 text-blue-100 ring-2 ring-blue-600' : 'bg-white border-gray-300 text-gray-700 hover:border-blue-400'" 
                                    class="px-4 py-4 border-2 rounded-xl transition-all text-sm font-medium flex flex-col items-center space-y-2">
                                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                                </svg>
                                <span>Ê∑±Ëìù</span>
                                <span class="text-xs text-gray-500">Blue</span>
                            </button>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">ÈÄâÊã©ÊÇ®ÂñúÊ¨¢ÁöÑ‰∏ªÈ¢òÊ®°ÂºèÔºåËÆæÁΩÆ‰ºöËá™Âä®‰øùÂ≠ò</p>
                    </div>

                    <!-- ÂÖ∂‰ªñÂ∫îÁî®ËÆæÁΩÆÂèØ‰ª•Âú®ËøôÈáåÊ∑ªÂä† -->
                    <div class="border-t border-gray-200 pt-5">
                        <h3 class="text-sm font-medium text-gray-700 mb-3">ÂÖ≥‰∫éÂ∫îÁî®</h3>
                        <div class="space-y-2 text-sm text-gray-600">
                            <p><strong>Â∫îÁî®ÂêçÁß∞:</strong> Pandy AI ÊâìÊ†áÂô®</p>
                            <p><strong>ÁâàÊú¨:</strong> v1.2.0</p>
                            <p><strong>Êõ¥Êñ∞Êó•Êúü:</strong> 2025-12-30</p>
                        </div>
                    </div>
                </div>

                <!-- ÂõæÂÉèÂèçÊé®Ê®°Âûã TabÔºàÂ∑≤ÁßªÈô§ÔºåÂäüËÉΩËΩ¨ÁßªÂà∞‰æßËæπÊ†èÔºâ -->
                <div x-show="settingsTab === 'tagging'" class="space-y-4">
                    <div class="bg-violet-50 border border-violet-200 rounded-lg p-4 text-center">
                        <p class="text-sm text-violet-700 mb-2">üìå ÊèêÁ§∫ËØçÊ®°ÊùøÁÆ°ÁêÜÂ∑≤ÁßªËá≥Â∑¶‰æßËæπÊ†è</p>
                        <p class="text-xs text-violet-600">Âú®ÊñáÁîüÂõæÂèçÊé®Ê®°Âºè‰∏ãÔºåÊÇ®ÂèØ‰ª•Âú®Â∑¶‰æßËæπÊ†èÁõ¥Êé•ÁÆ°ÁêÜÂíåÂàáÊç¢Ê®°Êùø</p>
                    </div>
                </div>

                <!-- ÂõæÂÉèÁºñËæëÊ®°Âûã TabÔºàÂ∑≤ÁßªÈô§ÔºåÂäüËÉΩËΩ¨ÁßªÂà∞‰æßËæπÊ†èÔºâ -->
                <div x-show="settingsTab === 'editing'" class="space-y-4">
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 text-center">
                        <p class="text-sm text-blue-700 mb-2">üìå ÊèêÁ§∫ËØçÊ®°ÊùøÁÆ°ÁêÜÂ∑≤ÁßªËá≥Â∑¶‰æßËæπÊ†è</p>
                        <p class="text-xs text-blue-600">Âú®ÂõæÂÉèÁºñËæëÊ®°Âºè‰∏ãÔºåÊÇ®ÂèØ‰ª•Âú®Â∑¶‰æßËæπÊ†èÁõ¥Êé•ÁÆ°ÁêÜÂíåÂàáÊç¢Ê®°Êùø</p>
                    </div>
                </div>

                <!-- ÊøÄÊ¥ªÁ®ãÂ∫è Tab -->
                <div x-show="settingsTab === 'license'" class="space-y-5">
                    <div class="bg-emerald-50 border border-emerald-200 rounded-lg p-3 mb-4">
                        <p class="text-sm text-emerald-700">üßæ Á®ãÂ∫èÊøÄÊ¥ª ‚Äî Âú®Êú¨Êú∫ÁîüÊàêÊøÄÊ¥ªÁ†ÅÂπ∂ÂÜôÂÖ•Êú¨Âú∞ÊéàÊùÉÊñá‰ª∂ÔºåÁ®ãÂ∫èÂêØÂä®Êó∂‰ºöÈ™åËØÅËØ•Êñá‰ª∂„ÄÇ</p>
                    </div>

                    <div class="grid grid-cols-1 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Êú¨Êú∫ÊøÄÊ¥ªÁ†Å</label>
                            <div class="flex space-x-2">
                                <input type="text" x-model="licenseCpuHex" readonly placeholder="ÁÇπÂáªËé∑ÂèñÊú¨Êú∫ÊøÄÊ¥ªÁ†Å" class="flex-1 px-4 py-3 border border-gray-300 rounded-lg bg-gray-50">
                                <button @click="getLocalCpuHex()" class="px-4 py-3 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors">Ëé∑ÂèñÊú¨Êú∫ÊøÄÊ¥ªÁ†Å</button>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ÊøÄÊ¥ªÁ†ÅÔºàÂèØÊâãÂä®Á≤òË¥¥ÊàñËá™Âä®ÁîüÊàêÔºâ</label>
                            <div class="flex space-x-2">
                                <input type="text" x-model="licenseInput" placeholder="ÊøÄÊ¥ªÁ†ÅÔºà‰æãÂ¶ÇÔºö<hex>PDYYÔºâ" class="flex-1 px-4 py-3 border border-gray-300 rounded-lg">
                                <button @click="activateLicense()" class="px-4 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors">ÊøÄÊ¥ªÁ†ÅÊøÄÊ¥ª</button>
                            </div>

                        </div>

                        <div>
                            <p class="text-sm" x-text="licenseStatus"></p>
                        </div>
                    </div>
                </div>

                <!-- API Key ÈÖçÁΩÆ Tab -->
                <div x-show="settingsTab === 'apikey'" class="space-y-5" x-data="{ showKey: false }">
                    <div class="bg-amber-50 border border-amber-200 rounded-lg p-3 mb-4">
                        <p class="text-sm text-amber-700">üîê API Key ÈÖçÁΩÆÁã¨Á´ãÂ≠òÂÇ®Âú® apikey.json Êñá‰ª∂‰∏≠Ôºå‰∏ç‰ºö‰∏éÊèêÁ§∫ËØçÊ®°ÊùøÊ∑∑Ê∑Ü„ÄÇ</p>
                    </div>

                    <!-- ÈÄâÊã©Ê∏†ÈÅì -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">API Ê∏†ÈÅì</label>
                        <div class="grid grid-cols-3 gap-3">
                            <template x-for="(provider, key) in apikeyConfig.providers" :key="key">
                                <button @click="if(isLicensed) apikeyConfig.current_provider = key" 
                                        :class="apikeyConfig.current_provider === key ? 'bg-purple-100 border-purple-500 text-purple-700' : (isLicensed ? 'bg-white border-gray-300 text-gray-700 hover:border-purple-400' : 'bg-gray-100 text-gray-400 cursor-not-allowed')" 
                                        class="px-4 py-3 border-2 rounded-lg transition-colors text-sm font-medium" :disabled="!isLicensed">
                                    <span x-text="providerNames[key]"></span>
                                </button>
                            </template>
                        </div>
                    </div>

                    <!-- ÂΩìÂâçÊ∏†ÈÅìÁöÑ API Key -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <span x-text="providerNames[apikeyConfig.current_provider]"></span> API Key
                        </label>
                        <div class="flex space-x-2">
                            <div class="relative flex-1">
                                <input :type="showKey ? 'text' : 'password'" 
                                       x-model="apikeyConfig.providers[apikeyConfig.current_provider].api_key" 
                                       placeholder="sk-xxxxxxxxxxxxxxxx" 
                                       :disabled="!isLicensed"
                                       title="ËØ∑ÂÖàÊøÄÊ¥ªÁ®ãÂ∫è‰ª•ÁºñËæë API Key"
                                       class="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <button type="button" @click="showKey = !showKey" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors">
                                    <svg x-show="!showKey" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
                                    <svg x-show="showKey" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path></svg>
                                </button>
                            </div>
                            <button @click="if(isLicensed) testApiConnection(apikeyConfig.current_provider)" 
                                    :disabled="!isLicensed || apiTestStatus[apikeyConfig.current_provider] === 'testing'"
                                    :class="{
                                        'bg-gray-100 text-gray-600 hover:bg-gray-200': !apiTestStatus[apikeyConfig.current_provider],
                                        'bg-blue-100 text-blue-600': apiTestStatus[apikeyConfig.current_provider] === 'testing',
                                        'bg-green-100 text-green-600': apiTestStatus[apikeyConfig.current_provider] === 'success',
                                        'bg-red-100 text-red-600': apiTestStatus[apikeyConfig.current_provider] === 'failed'
                                    }"
                                    class="px-4 py-3 rounded-lg transition-colors font-medium text-sm whitespace-nowrap">
                                <span x-show="!apiTestStatus[apikeyConfig.current_provider]">Ê£ÄÊµã</span>
                                <span x-show="apiTestStatus[apikeyConfig.current_provider] === 'testing'">Ê£ÄÊµã‰∏≠...</span>
                                <span x-show="apiTestStatus[apikeyConfig.current_provider] === 'success'">‚úì ÊàêÂäü</span>
                                <span x-show="apiTestStatus[apikeyConfig.current_provider] === 'failed'">‚úó Â§±Ë¥•</span>
                            </button>
                        </div>
                    </div>

                    <!-- Base URL -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Base URL</label>
                        <input type="text" 
                               x-model="apikeyConfig.providers[apikeyConfig.current_provider].base_url" 
                               placeholder="https://api.example.com/v1" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    </div>

                    <!-- Ê®°ÂûãÈÄâÊã©ÔºàËá™ÂÆö‰πâ‰∏ãÊãâÔºâ -->
                    <div x-data="{ modelDropdownOpen: false }">
                        <div class="flex items-center justify-between mb-2">
                            <label class="block text-sm font-medium text-gray-700">ÈªòËÆ§Ê®°Âûã</label>
                            <button @click="openModelManageDialog()" class="text-xs text-violet-600 hover:text-violet-800 font-medium">‚öô Ê®°ÂûãÁÆ°ÁêÜ</button>
                        </div>
                        <div class="relative">
                            <!-- ÈÄâ‰∏≠ÊòæÁ§∫ -->
                            <button @click="modelDropdownOpen = !modelDropdownOpen" 
                                    @click.away="modelDropdownOpen = false"
                                    type="button"
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-white text-left flex items-center justify-between focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <span class="truncate" x-text="getCurrentProviderModels().find(m => m.id === apikeyConfig.model)?.name || apikeyConfig.model || 'ÈÄâÊã©Ê®°Âûã'"></span>
                                <svg class="w-5 h-5 text-gray-400 transition-transform" :class="{ 'rotate-180': modelDropdownOpen }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <!-- ‰∏ãÊãâÂàóË°®ÔºàÂêë‰∏äÂ±ïÂºÄÔºâ -->
                            <div x-show="modelDropdownOpen" 
                                 x-transition:enter="transition ease-out duration-100"
                                 x-transition:enter-start="opacity-0 scale-95"
                                 x-transition:enter-end="opacity-100 scale-100"
                                 x-transition:leave="transition ease-in duration-75"
                                 x-transition:leave-start="opacity-100 scale-100"
                                 x-transition:leave-end="opacity-0 scale-95"
                                 class="absolute z-50 bottom-full mb-1 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto">
                                <template x-for="(model, index) in getCurrentProviderModels()" :key="model.id">
                                    <div class="group flex items-center justify-between px-4 py-2.5 hover:bg-purple-50 cursor-pointer"
                                         :class="{ 'bg-purple-100': apikeyConfig.model === model.id }">
                                        <div class="flex-1 min-w-0" @click="apikeyConfig.model = model.id; modelDropdownOpen = false">
                                            <div class="text-sm truncate" :class="apikeyConfig.model === model.id ? 'text-purple-700 font-medium' : 'text-gray-700'" x-text="model.name"></div>
                                            <div class="text-xs text-gray-400 truncate" x-show="model.name !== model.id" x-text="model.id"></div>
                                        </div>
                                        <!-- Âà†Èô§ÊåâÈíÆÔºö‰ªÖËá™ÂÆö‰πâÊ®°ÂûãÊòæÁ§∫ÔºåÊÇ¨ÂÅúÊó∂Âá∫Áé∞ -->
                                        <button x-show="apikeyConfig.providers[apikeyConfig.current_provider].models && apikeyConfig.providers[apikeyConfig.current_provider].models.length > 0"
                                                @click.stop="deleteModelById(model.id)"
                                                class="ml-2 p-1 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all"
                                                title="Âà†Èô§Ê≠§Ê®°Âûã">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Â∫ïÈÉ®ÊåâÈíÆ -->
            <div class="bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-between items-center">
                <div class="flex space-x-3">
                    <button @click="importConfig()" class="px-4 py-2 bg-blue-50 text-blue-600 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors text-sm font-medium">
                        üì• ÂØºÂÖ•ÈÖçÁΩÆ
                    </button>
                    <button @click="exportConfig()" class="px-4 py-2 bg-green-50 text-green-600 border border-green-200 rounded-lg hover:bg-green-100 transition-colors text-sm font-medium">
                        üì§ ÂØºÂá∫ÈÖçÁΩÆ
                    </button>
                </div>
                <div class="flex space-x-3">
                    <button @click="showSettingsModal = false" class="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors">
                        ÂèñÊ∂à
                    </button>
                    <button @click="saveConfig(); saveApikeyConfig(); saveLicenseCode(); showSettingsModal = false" class="px-6 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors font-medium">
                        ‰øùÂ≠òÂÖ®ÈÉ®
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ËÆ≠ÁªÉÂàÜÊûêÂô®ËÆæÁΩÆÂºπÁ™ó -->
    <div x-show="showAnalyzerSettingsModal" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" @click.self="showAnalyzerSettingsModal = false">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col">
            <!-- Ê†áÈ¢òÊ†è -->
            <div class="bg-gradient-to-r from-green-500 to-emerald-500 px-6 py-4 flex items-center justify-between">
                <h2 class="text-xl font-bold text-white">üìä ËÆ≠ÁªÉÂàÜÊûêÂô®ËÆæÁΩÆ</h2>
                <button @click="showAnalyzerSettingsModal = false" class="text-white hover:text-gray-200">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- ÂÜÖÂÆπÂå∫Âüü -->
            <div class="flex-1 overflow-y-auto p-6 space-y-5">
                <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                    <p class="text-sm text-green-700">üí° ËøôÈáåÈÖçÁΩÆËÆ≠ÁªÉÂàÜÊûêÂô®‰ΩøÁî®ÁöÑAIÊèêÁ§∫ËØçÔºåÁî®‰∫éÂàÜÊûêËÆ≠ÁªÉÊó•ÂøóÂπ∂ÁîüÊàê‰ºòÂåñÂª∫ËÆÆ„ÄÇ</p>
                </div>

                <!-- Á≥ªÁªüÊèêÁ§∫ËØç -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Á≥ªÁªüÊèêÁ§∫ËØç</label>
                    <textarea 
                        x-model="analyzerSystemPrompt" 
                        rows="10" 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm resize-none font-mono"
                        placeholder="ËæìÂÖ•Á≥ªÁªüÊèêÁ§∫ËØç..."></textarea>
                    <p class="text-xs text-gray-500 mt-1">ÂÆö‰πâAIÂàÜÊûêÂ∏àÁöÑËßíËâ≤ÂíåÂàÜÊûêË¶ÅÊ±Ç</p>
                </div>

                <!-- Áî®Êà∑ÊèêÁ§∫ËØç -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Áî®Êà∑ÊèêÁ§∫ËØçÔºàÂèØÈÄâÔºâ</label>
                    <textarea 
                        x-model="analyzerUserPrompt" 
                        rows="4" 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm resize-none font-mono"
                        placeholder="ËæìÂÖ•Áî®Êà∑ÊèêÁ§∫ËØçÔºàÂèØÈÄâÔºâ..."></textarea>
                    <p class="text-xs text-gray-500 mt-1">È¢ùÂ§ñÁöÑÂàÜÊûêÊåá‰ª§ÔºåÁïôÁ©∫Âàô‰ΩøÁî®ÈªòËÆ§</p>
                </div>

                <!-- Êìç‰ΩúÊåâÈíÆ -->
                <div class="flex items-center justify-between pt-4 border-t border-gray-200">
                    <button @click="resetAnalyzerPrompts()" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium">
                        üîÑ ÊÅ¢Â§çÈªòËÆ§
                    </button>
                    <div class="flex space-x-2">
                        <button @click="showAnalyzerSettingsModal = false" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium">
                            ÂèñÊ∂à
                        </button>
                        <button @click="saveAnalyzerSettings()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium">
                            üíæ ‰øùÂ≠òËÆæÁΩÆ
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÊèêÁ§∫ËØçÊ®°ÊùøÁÆ°ÁêÜÂô® -->
    <div x-show="showPromptTemplateManager" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]" @click.self="showPromptTemplateManager = false">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col">
            <div class="border-b border-gray-200 px-6 py-4 flex items-center justify-between">
                <h3 class="text-lg font-bold text-gray-800">‚ú® ÊèêÁ§∫ËØçÊ®°ÊùøÁÆ°ÁêÜ</h3>
                <button @click="showPromptTemplateManager = false" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div class="flex-1 overflow-y-auto p-6">
                <!-- Ê®°ÊùøÂàóË°® -->
                <div class="space-y-3 mb-6">
                    <template x-for="(template, index) in getCurrentModeTemplates()" :key="template.id">
                        <div class="border border-gray-200 rounded-lg p-4 hover:border-purple-300 transition-colors">
                            <div class="flex items-start justify-between mb-3">
                                <div class="flex-1">
                                    <input 
                                        type="text" 
                                        x-model="template.name" 
                                        @blur="saveConfig()"
                                        class="text-base font-semibold text-gray-800 border-0 border-b border-transparent hover:border-gray-300 focus:border-purple-500 focus:ring-0 px-0 py-1 w-full"
                                        placeholder="Ê®°ÊùøÂêçÁß∞">
                                </div>
                                <button 
                                    @click="deleteTemplate(template.id)" 
                                    :disabled="template.id === 'default'"
                                    class="ml-3 text-red-500 hover:text-red-700 disabled:opacity-30 disabled:cursor-not-allowed">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-xs font-medium text-gray-600 mb-1">Á≥ªÁªüÊèêÁ§∫ËØç</label>
                                    <textarea 
                                        x-model="template.system_prompt" 
                                        @blur="saveConfig()"
                                        rows="3" 
                                        class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"
                                        placeholder="ËæìÂÖ•Á≥ªÁªüÊèêÁ§∫ËØç..."></textarea>
                                </div>
                                <div>
                                    <label class="block text-xs font-medium text-gray-600 mb-1">Áî®Êà∑Êåá‰ª§</label>
                                    <textarea 
                                        x-model="template.user_prompt" 
                                        @blur="saveConfig()"
                                        rows="3" 
                                        class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"
                                        placeholder="ËæìÂÖ•Áî®Êà∑Êåá‰ª§..."></textarea>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
                
                <!-- Ê∑ªÂä†Êñ∞Ê®°ÊùøÊåâÈíÆ -->
                <button 
                    @click="createNewTemplate()" 
                    class="w-full px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-purple-400 hover:text-purple-600 transition-colors flex items-center justify-center space-x-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                    </svg>
                    <span class="font-medium">Ê∑ªÂä†Êñ∞Ê®°Êùø</span>
                </button>
            </div>
            
            <div class="border-t border-gray-200 px-6 py-4 flex justify-end">
                <button 
                    @click="showPromptTemplateManager = false" 
                    class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium">
                    ÂÆåÊàê
                </button>
            </div>
        </div>
    </div>

    <!-- Ê®°ÂûãÁÆ°ÁêÜÂºπÁ™ó -->
    <div x-show="showModelManageDialog" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]" @click.self="showModelManageDialog = false">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg">
            <div class="border-b border-gray-200 px-5 py-4 flex items-center justify-between">
                <h3 class="text-lg font-bold text-gray-800">Ê®°ÂûãÁÆ°ÁêÜ</h3>
                <button @click="showModelManageDialog = false" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div class="p-5">
                <div class="flex items-center justify-between mb-3">
                    <span class="text-sm text-gray-600">ÂΩìÂâçÊ∏†ÈÅì: <span class="font-medium text-violet-600" x-text="providerNames[apikeyConfig.current_provider]"></span></span>
                    <div class="flex items-center space-x-2">
                        <button @click="restoreDefaultModelsForCurrentProvider()" class="px-3 py-1.5 bg-gray-100 text-gray-700 text-sm rounded-lg hover:bg-gray-200 transition-colors">
                            ÊÅ¢Â§çÈªòËÆ§Ê®°Âûã
                        </button>
                        <button @click="openAddModelDialog()" class="px-3 py-1.5 bg-violet-600 text-white text-sm rounded-lg hover:bg-violet-700 transition-colors">
                            + Ê∑ªÂä†Ê®°Âûã
                        </button>
                    </div>
                </div>
                <div class="border border-gray-200 rounded-lg max-h-80 overflow-y-auto">
                    <template x-if="getCurrentProviderModels().length === 0">
                        <div class="p-6 text-center text-gray-400">
                            <svg class="w-12 h-12 mx-auto mb-2 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"></path>
                            </svg>
                            <p>ÊöÇÊó†Ê®°ÂûãÔºåÁÇπÂáª‰∏äÊñπÊåâÈíÆÊ∑ªÂä†</p>
                        </div>
                    </template>
                    <template x-for="(model, index) in getCurrentProviderModels()" :key="model.id">
                        <div class="flex items-center justify-between px-4 py-3 border-b border-gray-100 last:border-b-0 hover:bg-gray-50">
                            <div class="flex-1 min-w-0 mr-3">
                                <div class="text-sm font-medium text-gray-800 truncate" x-text="model.id"></div>
                            </div>
                            <button @click="deleteModelById(model.id)" 
                                    class="p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors"
                                    title="Âà†Èô§Ê≠§Ê®°Âûã">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </template>
                </div>
            </div>
            <div class="border-t border-gray-200 px-5 py-4 flex justify-end">
                <button @click="showModelManageDialog = false" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm">
                    ÂÖ≥Èó≠
                </button>
            </div>
        </div>
    </div>

    <!-- Ê®°ÂûãÁºñËæëÂºπÁ™ó -->
    <div x-show="showModelEditDialog" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[65]" @click.self="showModelEditDialog = false">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md">
            <div class="border-b border-gray-200 px-5 py-4 flex items-center justify-between">
                <h3 class="text-lg font-bold text-gray-800" x-text="editingModelIndex === -1 ? 'Ê∑ªÂä†Ê®°Âûã' : 'ÁºñËæëÊ®°Âûã'"></h3>
                <button @click="showModelEditDialog = false" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div class="p-5 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Ê®°Âûã ID <span class="text-red-500">*</span>
                    </label>
                    <input type="text" x-model="editingModel.id" placeholder="‰æãÂ¶Ç: gpt-4o, Qwen/Qwen2.5-VL-72B-Instruct" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm">
                    <p class="mt-1 text-xs text-gray-500">APIË∞ÉÁî®Êó∂‰ΩøÁî®ÁöÑÊ®°ÂûãÊ†áËØÜÁ¨¶</p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ê®°ÂûãÂêçÁß∞</label>
                    <input type="text" x-model="editingModel.name" placeholder="ÊòæÁ§∫ÂêçÁß∞ÔºàÂèØÈÄâÔºåÁïôÁ©∫Âàô‰ΩøÁî®IDÔºâ" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm">
                    <p class="mt-1 text-xs text-gray-500">Âú®‰∏ãÊãâÂàóË°®‰∏≠ÊòæÁ§∫ÁöÑÂèãÂ•ΩÂêçÁß∞</p>
                </div>
            </div>
            <div class="border-t border-gray-200 px-5 py-4 flex justify-end space-x-3">
                <button @click="showModelEditDialog = false" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm">
                    ÂèñÊ∂à
                </button>
                <button @click="saveModel()" class="px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors text-sm font-medium">
                    ‰øùÂ≠ò
                </button>
            </div>
        </div>
    </div>

    <!-- ËØ¶ÊÉÖÂºπÁ™ó -->
    <div x-show="detailImage" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" @click.self="detailImage = null">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col">
            <div class="bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between">
                <h2 class="text-lg font-bold text-gray-800" x-text="`ÁºñËæëËØ¶ÊÉÖ - ${detailImage?.name || ''}`"></h2>
                <button @click="detailImage = null" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <div class="flex-1 flex overflow-hidden">
                <!-- Â∑¶‰æßÂ§ßÂõæÔºöÂ∞ΩÂèØËÉΩÈì∫Êª° -->
                <div class="w-1/2 p-3 flex items-center justify-center bg-gray-50">
                    <div class="w-full h-full flex items-center justify-center">
                        <img :src="detailImage?.thumbnail" :alt="detailImage?.name" class="w-full h-full object-contain rounded-lg shadow-lg">
                    </div>
                </div>

                <!-- Âè≥‰æßÁºñËæëÔºö‰∏äÊñπÂ∞∫ÂØ∏Ôºå‰∏ãÊñπÊñáÊú¨ -->
                <div class="w-1/2 p-6 flex flex-col">
                    <div class="flex items-center justify-between mb-2">
                        <label class="block text-sm font-medium text-gray-700">ÊèêÁ§∫ËØçÂÜÖÂÆπ:</label>
                        <span class="text-xs text-gray-500" x-text="detailImage ? `${detailImage.width}x${detailImage.height}` : ''"></span>
                    </div>
                    <textarea x-model="detailImage.text" rows="20" class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"></textarea>
                    
                    <div class="flex space-x-3 mt-4">
                        <button @click="tagSingleImage(detailImage.id)" class="flex-1 px-4 py-3 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors font-medium">
                            ‚ú® AI ÂèçÊé®
                        </button>
                        <button @click="saveDetail()" class="flex-1 px-4 py-3 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors font-medium">
                            üíæ ‰øùÂ≠ò
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÊàêÂØπËØ¶ÊÉÖÂºπÁ™ó -->
    <div x-show="detailPair" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" @click.self="detailPair = null" 
         x-data="{ previewSide: 'left', showArrows: false, arrowTimer: null }" 
         @keydown.left.window="if (detailPair && !['INPUT', 'TEXTAREA'].includes($event.target.tagName)) { $event.preventDefault(); showArrows = true; clearTimeout(arrowTimer); arrowTimer = setTimeout(() => showArrows = false, 1500); previewSide = handlePairDetailArrow(-1, previewSide); }" 
         @keydown.right.window="if (detailPair && !['INPUT', 'TEXTAREA'].includes($event.target.tagName)) { $event.preventDefault(); showArrows = true; clearTimeout(arrowTimer); arrowTimer = setTimeout(() => showArrows = false, 1500); previewSide = handlePairDetailArrow(1, previewSide); }">
        <!-- Â∑¶ÁÆ≠Â§¥ÊåâÈíÆ -->
        <button @click="previewSide = handlePairDetailArrow(-1, previewSide)" 
                x-show="showArrows"
                x-transition:enter="transition ease-out duration-200"
                x-transition:enter-start="opacity-0 -translate-x-4"
                x-transition:enter-end="opacity-100 translate-x-0"
                x-transition:leave="transition ease-in duration-150"
                x-transition:leave-start="opacity-100 translate-x-0"
                x-transition:leave-end="opacity-0 -translate-x-4"
                class="absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/90 hover:bg-white rounded-full shadow-lg flex items-center justify-center text-gray-600 hover:text-violet-600 transition-all z-10">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
        </button>
        <!-- Âè≥ÁÆ≠Â§¥ÊåâÈíÆ -->
        <button @click="previewSide = handlePairDetailArrow(1, previewSide)" 
                x-show="showArrows"
                x-transition:enter="transition ease-out duration-200"
                x-transition:enter-start="opacity-0 translate-x-4"
                x-transition:enter-end="opacity-100 translate-x-0"
                x-transition:leave="transition ease-in duration-150"
                x-transition:leave-start="opacity-100 translate-x-0"
                x-transition:leave-end="opacity-0 translate-x-4"
                class="absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/90 hover:bg-white rounded-full shadow-lg flex items-center justify-center text-gray-600 hover:text-violet-600 transition-all z-10">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
        </button>
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col">
            <div class="bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between">
                <h2 class="text-lg font-bold text-gray-800">
                    ËØ¶ÊÉÖ 
                    <span class="text-sm font-normal text-gray-500" x-text="'(' + (detailPairIndex + 1) + '/' + pairs.length + ')'"></span>
                </h2>
                <button @click="detailPair = null" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <div class="flex-1 flex overflow-hidden">
                <!-- Â∑¶‰æßÔºöÂéüÂõæÂå∫Âüü -->
                <div class="w-1/2 p-6 bg-gray-50 overflow-auto border-r border-gray-200">
                    <h3 class="text-sm font-medium text-gray-700 mb-3">ÂéüÂõæ</h3>
                    <!-- Â§ßÂõæÈ¢ÑËßàÂå∫Âüü - Ê†πÊçÆpreviewSideÊòæÁ§∫‰∏çÂêåÂõæÁâáÔºåÊîØÊåÅÊãñÊãΩ‰∏ä‰º† -->
                    <div class="bg-white rounded-xl border border-blue-200 p-3 mb-4"
                         x-data="{ isDragging: false }"
                         @dragover.prevent="isDragging = true"
                         @dragleave.prevent="isDragging = false"
                         @drop.prevent="isDragging = false; handlePairImageDrop($event, previewSide)">
                        <div class="w-full aspect-square bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden relative transition-all"
                             :class="isDragging ? 'ring-4 ring-violet-400 bg-violet-50' : ''">
                            <!-- ÊãñÊãΩÊèêÁ§∫ÈÅÆÁΩ© -->
                            <div x-show="isDragging" class="absolute inset-0 bg-violet-100/80 flex flex-col items-center justify-center z-10">
                                <svg class="w-12 h-12 text-violet-500 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                </svg>
                                <p class="text-violet-600 font-medium">ÈáäÊîæ‰ª•‰∏ä‰º†ÂõæÁâá</p>
                                <p class="text-violet-500 text-sm" x-text="previewSide === 'left' ? 'Â∞ÜËÆæÁΩÆ‰∏∫ÂéüÂõæ' : 'Â∞ÜËÆæÁΩÆ‰∏∫ÁõÆÊ†áÂõæ'"></p>
                            </div>
                            <!-- ÊòæÁ§∫Â∑¶‰æßÂõæÁâá -->
                            <template x-if="previewSide === 'left'">
                                <div class="w-full h-full flex items-center justify-center">
                                    <img x-show="detailPair && detailPair.left && detailPair.left.path" 
                                         :src="detailPair && detailPair.left ? '/api/file/image?path=' + encodeURIComponent(detailPair.left.path) : ''" 
                                         @click="detailPair && detailPair.left && (previewSide = 'left', fullscreenImage = '/api/file/image?path=' + encodeURIComponent(detailPair.left.path), fullscreenImageSide = 'left')"
                                         class="w-full h-full object-contain cursor-zoom-in hover:opacity-90 transition-opacity">
                                    <div x-show="!detailPair || !detailPair.left" class="text-gray-400 text-sm text-center">
                                        <p>ÁÇπÂáª‰∏ãÊñπÁº©Áï•ÂõæÈÄâÊã©ÂõæÁâá</p>
                                        <p class="text-xs mt-1">ÊàñÊãñÊãΩÂõæÁâáÂà∞Ê≠§Â§Ñ</p>
                                    </div>
                                </div>
                            </template>
                            <!-- ÊòæÁ§∫Âè≥‰æßÂõæÁâá -->
                            <template x-if="previewSide === 'right'">
                                <div class="w-full h-full flex items-center justify-center">
                                    <img x-show="detailPair && detailPair.right && detailPair.right.path" 
                                         :src="detailPair && detailPair.right ? '/api/file/image?path=' + encodeURIComponent(detailPair.right.path) : ''" 
                                         @click="detailPair && detailPair.right && (previewSide = 'right', fullscreenImage = '/api/file/image?path=' + encodeURIComponent(detailPair.right.path), fullscreenImageSide = 'right')"
                                         class="w-full h-full object-contain cursor-zoom-in hover:opacity-90 transition-opacity">
                                    <div x-show="!detailPair || !detailPair.right" class="text-gray-400 text-sm text-center">
                                        <p>ÁÇπÂáª‰∏ãÊñπÁº©Áï•ÂõæÈÄâÊã©ÂõæÁâá</p>
                                        <p class="text-xs mt-1">ÊàñÊãñÊãΩÂõæÁâáÂà∞Ê≠§Â§Ñ</p>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>
                    
                    <!-- Â∫ïÈÉ®Áº©Áï•ÂõæÂå∫Âüü -->
                    <div class="flex items-start space-x-6">
                        <!-- ÂéüÂõæÁº©Áï•Âõæ -->
                        <div>
                            <p class="text-xs text-gray-500 mb-2">ÂéüÂõæ</p>
                            <div class="flex space-x-2">
                                <!-- ÂõæÁâá1 -->
                                <div class="relative group/thumb" x-data="{ isThumbDragging: false }" @dragover.prevent="isThumbDragging = true" @dragleave.prevent="isThumbDragging = false" @drop.prevent="isThumbDragging = false; previewSide = 'left'; handlePairImageDrop($event, 'left')">
                                    <div @click="detailPair && detailPair.left ? (previewSide = 'left') : (detailPair && selectPairSide(detailPair.id, 'left'))" 
                                         class="w-16 h-16 rounded-lg p-0.5 cursor-pointer transition-all"
                                         :class="(previewSide === 'left' ? 'bg-gradient-to-br from-blue-400 to-purple-500 shadow-lg' : 'bg-gray-200 hover:bg-gray-300') + (isThumbDragging ? ' ring-4 ring-violet-400' : '')">
                                        <div class="w-full h-full bg-gray-100 rounded-md flex items-center justify-center overflow-hidden">
                                            <img x-show="detailPair && detailPair.left && detailPair.left.thumbnail" :src="detailPair && detailPair.left ? detailPair.left.thumbnail : ''" class="w-full h-full object-cover">
                                            <span x-show="!detailPair || !detailPair.left" class="text-gray-400 text-[10px]">+</span>
                                        </div>
                                    </div>
                                    <!-- Âà†Èô§ÊåâÈíÆ -->
                                    <button x-show="detailPair && detailPair.left" 
                                            @click.stop="clearPairSide('left')"
                                            class="absolute -top-1.5 -right-1.5 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover/thumb:opacity-100 transition-opacity hover:bg-red-600 shadow-sm">
                                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                                    </button>
                                    <div class="mt-1 text-center text-[10px] text-gray-500">ÂõæÁâá1</div>
                                </div>
                                <!-- ÂõæÁâá2 (È¢ÑÁïô) -->
                                <div class="relative group/thumb" x-data="{ isThumbDragging: false }" @dragover.prevent="isThumbDragging = true" @dragleave.prevent="isThumbDragging = false" @drop.prevent="isThumbDragging = false; previewSide = 'left'; handlePairImageDrop($event, 'left2')">
                                    <div @click="detailPair && detailPair.left2 ? (previewSide = 'left') : (detailPair && selectPairSide(detailPair.id, 'left2'))" 
                                         class="w-16 h-16 rounded-lg p-0.5 cursor-pointer transition-all"
                                         :class="(previewSide === 'left' ? 'bg-gradient-to-br from-blue-400 to-purple-500 shadow-lg' : 'bg-gray-200 hover:bg-gray-300') + (isThumbDragging ? ' ring-4 ring-violet-400' : '')">
                                        <div class="w-full h-full bg-gray-100 rounded-md flex items-center justify-center overflow-hidden">
                                            <img x-show="detailPair && detailPair.left2 && detailPair.left2.thumbnail" :src="detailPair && detailPair.left2 ? detailPair.left2.thumbnail : ''" class="w-full h-full object-cover">
                                            <span x-show="!detailPair || !detailPair.left2" class="text-gray-400 text-[10px]">+</span>
                                        </div>
                                    </div>
                                    <!-- Âà†Èô§ÊåâÈíÆ -->
                                    <button x-show="detailPair && detailPair.left2" 
                                            @click.stop="clearPairSide('left2')"
                                            class="absolute -top-1.5 -right-1.5 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover/thumb:opacity-100 transition-opacity hover:bg-red-600 shadow-sm">
                                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                                    </button>
                                    <div class="mt-1 text-center text-[10px] text-gray-500">ÂõæÁâá2</div>
                                </div>
                            </div>
                        </div>
                        <!-- ÁõÆÊ†áÂõæÁº©Áï•Âõæ -->
                        <div>
                            <p class="text-xs text-gray-500 mb-2">ÁõÆÊ†áÂõæ</p>
                            <div class="relative group/thumb" x-data="{ isThumbDragging: false }" @dragover.prevent="isThumbDragging = true" @dragleave.prevent="isThumbDragging = false" @drop.prevent="isThumbDragging = false; previewSide = 'right'; handlePairImageDrop($event, 'right')">
                                <div @click="detailPair && detailPair.right ? (previewSide = 'right') : (detailPair && selectPairSide(detailPair.id, 'right'))" 
                                     class="w-16 h-16 rounded-lg p-0.5 cursor-pointer transition-all"
                                     :class="(previewSide === 'right' ? 'bg-gradient-to-br from-blue-400 to-purple-500 shadow-lg' : 'bg-gray-200 hover:bg-gray-300') + (isThumbDragging ? ' ring-4 ring-violet-400' : '')">
                                    <div class="w-full h-full bg-gray-100 rounded-md flex items-center justify-center overflow-hidden">
                                        <img x-show="detailPair && detailPair.right && detailPair.right.thumbnail" :src="detailPair && detailPair.right ? detailPair.right.thumbnail : ''" class="w-full h-full object-cover">
                                        <span x-show="!detailPair || !detailPair.right" class="text-gray-400 text-[10px]">+</span>
                                    </div>
                                </div>
                                <!-- Âà†Èô§ÊåâÈíÆ -->
                                <button x-show="detailPair && detailPair.right" 
                                        @click.stop="clearPairSide('right')"
                                        class="absolute -top-1.5 -right-1.5 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover/thumb:opacity-100 transition-opacity hover:bg-red-600 shadow-sm">
                                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                                </button>
                                <div class="mt-1 text-center text-[10px] text-gray-500">ÁõÆÊ†áÂõæ</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Âè≥‰æßÔºöÊèêÁ§∫ËØçÁºñËæë -->
                <div class="w-1/2 p-6 flex flex-col bg-white">
                    <div class="flex items-center justify-between mb-3">
                        <label class="block text-sm font-medium text-gray-700">ÊèêÁ§∫ËØç</label>
                        <button @click="translatePairText()" class="text-sm text-violet-600 hover:text-violet-800 flex items-center space-x-1">
                            <span>ÁøªËØë</span>
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                    </div>
                    <textarea x-model="detailPair.text" rows="12" placeholder="ËØ∑Áî®ÁÆÄÊ¥ÅÁöÑËØ≠Ë®ÄÊèèËø∞‰Ω†Â∏åÊúõÂ∞ÜÂéüÂõæËΩ¨Êç¢ÊàêÁöÑÁõÆÊ†áÂõæÈ£éÊ†ºÊàñÊïàÊûúÔºà‰ºòÂÖà‰ΩøÁî®Ëã±ÊñáÔºâ&#10;‰æãÂ¶ÇÔºö&#10;- ËΩ¨Êç¢‰∏∫ÂêâÂçúÂäõÂä®ÁîªÈ£éÊ†ºÔºàTransform into Ghibli anime styleÔºâ&#10;- ËΩ¨Êç¢‰∏∫Ê∞¥Â¢®ÁîªÈ£éÊ†ºÔºàTransform into ink wash painting styleÔºâ&#10;- ÁªôËßíËâ≤Êà¥‰∏äÁúºÈïúÔºàAdd glasses to the characterÔºâ" class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-sm"></textarea>

                    <!-- AIÂèçÊé®ÊåâÈíÆ -->
                    <button @click="tagSinglePair(detailPair.id)" class="mt-4 px-4 py-2 text-violet-600 hover:text-violet-800 hover:bg-violet-50 rounded-lg transition-colors text-sm font-medium flex items-center justify-center space-x-2">
                        <span>‚ú®</span>
                        <span>Ëé∑ÂèñAIÊé®ËçêÊèêÁ§∫ËØç</span>
                    </button>

                    <!-- Â∫ïÈÉ®ÊåâÈíÆ -->
                    <div class="flex space-x-3 mt-4 pt-4 border-t border-gray-100">
                        <button @click="detailPair = null" class="flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium">
                            ÂèñÊ∂à
                        </button>
                        <button @click.stop="deletePairDetail()" class="px-4 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-medium">
                            Âà†Èô§ËØ•ÁªÑ
                        </button>
                        <button @click="savePairDetail()" class="flex-1 px-4 py-3 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors font-medium">
                            Á°ÆÂÆö
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Êñ∞Â¢ûÊàêÂØπÁªÑÂºπÁ™ó -->
    <div x-show="showAddPairModal" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" @click.self="closeAddPairModal()">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-5xl h-[80vh] flex flex-col overflow-hidden">
            <!-- Â§¥ÈÉ® -->
            <div class="px-6 py-4 border-b border-gray-100 flex items-center justify-between">
                <div>
                    <h3 class="text-lg font-bold text-gray-800">‰∏ä‰º†Á¥†Êùê</h3>
                    <p class="text-xs text-gray-500 mt-1">
                        ‚ìò Â¶ÇÈúÄ‰∏ä‰º†ÂéãÁº©ÂåÖËØ∑ÂâçÂæÄ <a href="#" @click.prevent="openTrainingDataFolder()" class="text-violet-600 hover:underline">Êï∞ÊçÆÁÆ°ÁêÜ</a> ËøõË°åÊìç‰Ωú
                    </p>
                </div>
                <button @click="closeAddPairModal()" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>

            <!-- ÂÜÖÂÆπÂå∫ -->
            <div class="flex-1 flex flex-col p-6 bg-gray-50 overflow-hidden">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-sm text-gray-600">ËØ∑‰æùÊ¨°‰∏ä‰º†ÂõæÁâáÁªÑ</span>
                    <span class="text-sm text-gray-500" x-text="`Â∑≤‰∏ä‰º†: ${stagedPairs.length}/100`"></span>
                </div>

                <!-- Áº©Áï•ÂõæÂàóË°® (Ê∞¥Âπ≥ÊªöÂä®) -->
                <div class="flex space-x-4 overflow-x-auto pb-4 mb-4 min-h-[140px] px-2">
                    <template x-for="(pair, index) in stagedPairs" :key="pair.id">
                        <div 
                            @click="setCurrentStaged(index)"
                            class="relative flex-shrink-0 w-32 h-24 rounded-lg border-2 overflow-hidden cursor-pointer transition-all group mt-2"
                            :class="currentStagedIndex === index ? 'border-purple-600 ring-2 ring-purple-100 shadow-lg scale-105' : 'border-gray-200 hover:border-purple-300'"
                        >
                            <div class="flex h-full">
                                <div class="w-1/2 bg-gray-100 flex items-center justify-center border-r border-gray-100 overflow-hidden">
                                    <img x-show="pair.left" :src="pair.left" class="w-full h-full object-cover">
                                    <span x-show="!pair.left" class="text-xs text-gray-400">A</span>
                                </div>
                                <div class="w-1/2 bg-gray-100 flex items-center justify-center overflow-hidden">
                                    <img x-show="pair.right" :src="pair.right" class="w-full h-full object-cover">
                                    <span x-show="!pair.right" class="text-xs text-gray-400">B</span>
                                </div>
                            </div>
                            
                            <!-- Â∫èÂè∑Ê†áÁ≠æ -->
                            <div class="absolute top-1 left-1 px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm" x-text="`ÂõæÁâá${index + 1}`"></div>

                            <!-- Âà†Èô§ÊåâÈíÆ -->
                            <button 
                                @click.stop="removeStagedPair(index, $event)"
                                class="absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600 shadow-sm z-10"
                            >
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                            </button>
                        </div>
                    </template>

                    <!-- Ê∑ªÂä†Êñ∞ÁªÑÊåâÈíÆ -->
                    <div 
                        @click="addStagedPair()"
                        class="flex-shrink-0 w-32 h-24 mt-2 rounded-lg border-2 border-dashed border-gray-300 flex flex-col items-center justify-center cursor-pointer hover:border-purple-500 hover:bg-purple-50 transition-colors text-gray-400 hover:text-purple-600"
                    >
                        <svg class="w-8 h-8 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                        <span class="text-xs">Ê∑ªÂä†ÁªÑ</span>
                    </div>
                </div>

                <!-- ÂΩìÂâçÁºñËæëÂå∫Âüü -->
                <div class="flex-1 flex gap-6 items-center justify-center bg-white rounded-xl border border-dashed border-gray-200 p-8 relative overflow-hidden" x-show="stagedPairs.length > 0">
                    <!-- Ê∞¥Âç∞ËÉåÊôØ -->
                    <div class="absolute inset-0 pointer-events-none opacity-[0.02] flex items-center justify-center overflow-hidden -rotate-12 transform scale-150">
                        <div class="text-4xl font-bold space-y-12 text-center select-none text-gray-900 grid grid-cols-2 gap-12">
                             <template x-for="i in 20">
                                <div>Pandy AI Tagger</div>
                             </template>
                        </div>
                    </div>

                    <!-- Â∑¶‰æßÔºöÂéüÂõæ -->
                    <div class="w-1/2 h-full max-h-[400px] flex flex-col z-10">
                         <div 
                            @click="selectStagedFile('left')"
                            class="flex-1 bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl hover:border-violet-500 hover:bg-violet-50 transition-all cursor-pointer flex flex-col items-center justify-center group relative overflow-hidden shadow-sm hover:shadow-md"
                         >
                            <img x-show="stagedPairs[currentStagedIndex] && stagedPairs[currentStagedIndex].left" :src="stagedPairs[currentStagedIndex]?.left" class="absolute inset-0 w-full h-full object-contain p-2 bg-white/50 backdrop-blur-sm">
                            
                            <div x-show="!stagedPairs[currentStagedIndex]?.left" class="flex flex-col items-center text-gray-400 group-hover:text-violet-600 transition-colors">
                                <svg class="w-12 h-12 mb-2 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                                <span class="text-lg font-medium">ÂéüÂõæ</span>
                            </div>
                         </div>
                    </div>

                    <!-- Âè≥‰æßÔºöÁõÆÊ†áÂõæ -->
                    <div class="w-1/2 h-full max-h-[400px] flex flex-col z-10">
                         <div 
                            @click="selectStagedFile('right')"
                            class="flex-1 bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl hover:border-violet-500 hover:bg-violet-50 transition-all cursor-pointer flex flex-col items-center justify-center group relative overflow-hidden shadow-sm hover:shadow-md"
                         >
                            <img x-show="stagedPairs[currentStagedIndex] && stagedPairs[currentStagedIndex].right" :src="stagedPairs[currentStagedIndex]?.right" class="absolute inset-0 w-full h-full object-contain p-2 bg-white/50 backdrop-blur-sm">
                            
                            <div x-show="!stagedPairs[currentStagedIndex]?.right" class="flex flex-col items-center text-gray-400 group-hover:text-violet-600 transition-colors">
                                <svg class="w-12 h-12 mb-2 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                                <span class="text-lg font-medium">ÁõÆÊ†áÂõæ</span>
                            </div>
                         </div>
                    </div>
                </div>
            </div>

            <!-- Â∫ïÈÉ®ÊåâÈíÆ -->
            <div class="px-6 py-4 border-t border-gray-100 flex justify-end space-x-3 bg-white">
                <button @click="closeAddPairModal()" class="px-6 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                    ÂèñÊ∂à
                </button>
                <button @click="confirmAddPairs()" class="px-6 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors font-medium shadow-md hover:shadow-lg">
                    Á°ÆÂÆö
                </button>
            </div>
        </div>
    </div>

    <!-- ÂØºÂÖ•Êï∞ÊçÆÈõÜËßÑÂàôÈÖçÁΩÆÂºπÁ™ó -->
    <div x-show="showImportRulesModal" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" @click.self="showImportRulesModal = false">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden">
            <div class="bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between">
                <h3 class="text-lg font-bold text-gray-800">üìÇ ÂØºÂÖ•Êï∞ÊçÆÈõÜ</h3>
                <button @click="showImportRulesModal = false" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            
            <div class="p-6 space-y-4">
                <!-- ÂØºÂÖ•Ê®°ÂºèÈÄâÊã© -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ÂØºÂÖ•Ê®°Âºè</label>
                    <div class="flex space-x-4">
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" x-model="importRules.mode" value="default" class="text-violet-600 focus:ring-violet-500">
                            <span class="text-sm text-gray-700">ÈªòËÆ§Ê®°Âºè</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" x-model="importRules.mode" value="match" class="text-violet-600 focus:ring-violet-500">
                            <span class="text-sm text-gray-700">ËßÑÂàôÂåπÈÖç</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" x-model="importRules.mode" value="manual" class="text-violet-600 focus:ring-violet-500">
                            <span class="text-sm text-gray-700">ÊâãÂä®ÂØºÂÖ•</span>
                        </label>
                    </div>
                </div>

                <!-- ÊâãÂä®ÂØºÂÖ•Ê®°ÂºèËÆæÁΩÆ -->
                <div x-show="importRules.mode === 'manual'" class="space-y-4">
                    <p class="text-sm text-gray-600">ÊâãÂä®ÂØºÂÖ•ÔºöÈÄâÊã©Êú¨Ê¨°ÂØºÂÖ•Êñá‰ª∂Â§πÂØπÂ∫îÁöÑËßíËâ≤ÔºàÂéüÂõæ1 / ÂéüÂõæ2 / ÁõÆÊ†áÂõæÔºâ„ÄÇÁ≥ªÁªü‰ºöÊääÊñá‰ª∂Â§π‰∏≠ÊØèÂº†ÂõæÁâá‰Ωú‰∏∫ÂçïÁã¨‰∏ÄÁªÑÔºåÊîæÂà∞‰Ω†ÈÄâÊã©ÁöÑÈÇ£‰∏Ä‰æß„ÄÇ</p>
                    <div class="flex items-center space-x-3">
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" x-model="importRules.manual_side" value="left" class="text-violet-600 focus:ring-violet-500">
                            <span class="text-sm text-gray-700">ÂéüÂõæ1</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" x-model="importRules.manual_side" value="left2" class="text-violet-600 focus:ring-violet-500">
                            <span class="text-sm text-gray-700">ÂéüÂõæ2</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" x-model="importRules.manual_side" value="right" class="text-violet-600 focus:ring-violet-500">
                            <span class="text-sm text-gray-700">ÁõÆÊ†áÂõæ</span>
                        </label>
                    </div>
                </div>

                <!-- ÈªòËÆ§Ê®°ÂºèËØ¥Êòé -->
                <div x-show="importRules.mode === 'default'" class="bg-violet-50 p-3 rounded-lg text-xs text-violet-700">
                    <p class="font-medium mb-1">ÈªòËÆ§Ê®°Âºè</p>
                    <p>ÂØºÂÖ•Êñá‰ª∂Â§π‰∏≠ÊâÄÊúâÂõæÁâáÂíåtxtÊñá‰ª∂ÔºåÊåâÊñá‰ª∂ÂêçÈ°∫Â∫èËá™Âä®ÈÖçÂØπ„ÄÇ</p>
                    <p class="mt-1">ÊØè‰∏§Âº†ÂõæÁâáÁªÑÊàê‰∏ÄÂØπÔºàÁ¨¨1Âº†‰∏∫ÂéüÂõæÔºåÁ¨¨2Âº†‰∏∫ÁõÆÊ†áÂõæÔºâ„ÄÇ</p>
                </div>

                <!-- ËßÑÂàôÂåπÈÖçÊ®°ÂºèËÆæÁΩÆ -->
                <div x-show="importRules.mode === 'match'" class="space-y-4">
                    <p class="text-sm text-gray-600">ËØ∑ËÆæÁΩÆÊñá‰ª∂ÂêçÂåπÈÖçËßÑÂàôÔºåÁ≥ªÁªüÂ∞ÜÂè™ÂØºÂÖ•Á¨¶ÂêàËßÑÂàôÁöÑÊàêÂØπÂõæÁâá„ÄÇ</p>
                    
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ÂéüÂõæÂêéÁºÄ</label>
                            <div class="flex items-center">
                                <span class="text-gray-400 mr-2 text-sm">*_</span>
                                <input type="text" x-model="importRules.left_suffix" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent text-sm" placeholder="R">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ÂéüÂõæ2ÂêéÁºÄ</label>
                            <div class="flex items-center">
                                <span class="text-gray-400 mr-2 text-sm">*_</span>
                                <input type="text" x-model="importRules.left2_suffix" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent text-sm" placeholder="G">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ÁõÆÊ†áÂõæÂêéÁºÄ</label>
                            <div class="flex items-center">
                                <span class="text-gray-400 mr-2 text-sm">*_</span>
                                <input type="text" x-model="importRules.right_suffix" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent text-sm" placeholder="T">
                            </div>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">TXTÊñá‰ª∂Ë∑üÈöè</label>
                        <div class="flex space-x-4">
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="radio" x-model="importRules.txt_follows" value="left" class="text-violet-600 focus:ring-violet-500">
                                <span class="text-sm text-gray-700">ÂéüÂõæ</span>
                            </label>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="radio" x-model="importRules.txt_follows" value="right" class="text-violet-600 focus:ring-violet-500">
                                <span class="text-sm text-gray-700">ÁõÆÊ†áÂõæ</span>
                            </label>
                        </div>
                    </div>

                    <div class="bg-violet-50 p-3 rounded-lg text-xs text-violet-700">
                        <p class="font-medium mb-1">ÂåπÈÖçÁ§∫‰æã</p>
                        <p>ËÆæÁΩÆÂéüÂõæÂêéÁºÄ: <span x-text="importRules.left_suffix || 'R'"></span>, ÁõÆÊ†áÂõæÂêéÁºÄ: <span x-text="importRules.right_suffix || 'T'"></span></p>
                        <p class="mt-1">‚úÖ ÂåπÈÖç: 001_<span x-text="importRules.left_suffix || 'R'"></span>.png + 001_<span x-text="importRules.right_suffix || 'T'"></span>.png</p>
                        <p>‚úÖ TXT: 001_<span x-text="importRules.txt_follows === 'left' ? (importRules.left_suffix || 'R') : (importRules.right_suffix || 'T')"></span>.txt</p>
                    </div>
                </div>
            </div>

            <div class="px-6 py-4 border-t border-gray-100 flex justify-end space-x-3 bg-gray-50">
                <button @click="showImportRulesModal = false" class="px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                    ÂèñÊ∂à
                </button>
                <button @click="confirmImportFolder()" class="px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors font-medium">
                    üìÇ ÈÄâÊã©Êñá‰ª∂Â§πÂπ∂ÂØºÂÖ•
                </button>
            </div>
        </div>
    </div>

    <!-- ÈáçÂëΩÂêçÂØπËØùÊ°Ü -->
    <div x-show="showRenameDialog" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" @click.self="showRenameDialog = false">
        <div class="bg-white rounded-xl shadow-2xl p-6 w-96">
            <h3 class="text-lg font-bold mb-4">ÊâπÈáèÈáçÂëΩÂêç</h3>
            <input type="text" x-model="renamePrefix" placeholder="ËæìÂÖ•Êñá‰ª∂ÂêçÂâçÁºÄ (Â¶Ç: lora_data)" class="w-full px-4 py-2 border border-gray-300 rounded-lg mb-4">
            <div class="flex space-x-3">
                <button @click="showRenameDialog = false" class="flex-1 px-4 py-2 bg-gray-200 rounded-lg">ÂèñÊ∂à</button>
                <button @click="batchRename()" class="flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg">Á°ÆÂÆö</button>
            </div>
        </div>
    </div>

    <!-- Ê∑ªÂä†ÊñáÊú¨ÂØπËØùÊ°Ü -->
    <div x-show="showAddTextDialog" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" @click.self="showAddTextDialog = false">
        <div class="bg-white rounded-xl shadow-2xl p-6 w-96">
            <h3 class="text-lg font-bold mb-4">ÊâπÈáèÊ∑ªÂä†ÊñáÊú¨</h3>
            <input type="text" x-model="addTextValue" placeholder="ËæìÂÖ•Ë¶ÅÊ∑ªÂä†ÁöÑÊñáÊú¨ (Â¶Ç: PD_style)" class="w-full px-4 py-2 border border-gray-300 rounded-lg mb-4">
            <div class="flex space-x-3">
                <button @click="showAddTextDialog = false" class="flex-1 px-4 py-2 bg-gray-200 rounded-lg">ÂèñÊ∂à</button>
                <button @click="batchAddText()" class="flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg">Á°ÆÂÆö</button>
            </div>
        </div>
    </div>

    <!-- Ë£ÅÂàáÂØπËØùÊ°Ü -->
    <div x-show="showResizeDialog" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" @click.self="showResizeDialog = false">
        <div class="bg-white rounded-xl shadow-2xl p-6 w-96">
            <h3 class="text-lg font-bold mb-4">ÊâπÈáèË£ÅÂàá</h3>
            <input type="number" x-model="resizeValue" placeholder="ÊúÄÈïøËæπÂ§ßÂ∞è (px)" class="w-full px-4 py-2 border border-gray-300 rounded-lg mb-4">
            <div class="flex space-x-3">
                <button @click="showResizeDialog = false" class="flex-1 px-4 py-2 bg-gray-200 rounded-lg">ÂèñÊ∂à</button>
                <button @click="batchResize()" class="flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg">Á°ÆÂÆö</button>
            </div>
        </div>
    </div>

    <!-- ÈÄöÁî®Á°ÆËÆ§ÂØπËØùÊ°ÜÔºàÂ∑≤ÁßªÈô§Ôºâ -->

    <!-- Toast ÈÄöÁü•ÂÆπÂô®ÔºàÂ∑≤ÁßªÈô§Ôºâ -->

    <!-- ËÆ∞ÂΩïËØ¶ÊÉÖÂºπÁ™ó -->
    <div x-show="showRecordDetail" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" @click.self="showRecordDetail = false">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[80vh] overflow-y-auto">
            <div class="sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between">
                <h2 class="text-xl font-bold text-gray-800">üìã ËÆ∞ÂΩïËØ¶ÊÉÖ</h2>
                <button @click="showRecordDetail = false" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div class="p-6 space-y-4" x-show="recordDetail">
                <div class="grid grid-cols-2 gap-4 text-sm">
                    <div><span class="text-gray-500">Ê®°ÂûãÂêçÁß∞:</span> <span class="font-medium" x-text="recordDetail?.model_name"></span></div>
                    <div><span class="text-gray-500">ÂàÜÊûêÊó∂Èó¥:</span> <span class="font-medium" x-text="recordDetail?.analysis_date"></span></div>
                    <div class="col-span-2"><span class="text-gray-500">Êó•ÂøóÊñá‰ª∂:</span> <span class="font-medium text-xs break-all" x-text="recordDetail?.log_file_path"></span></div>
                </div>
                <hr>
                <h4 class="font-bold text-green-700">ËÆ≠ÁªÉÈÖçÁΩÆ</h4>
                <div class="grid grid-cols-2 gap-4 text-sm">
                    <div><span class="text-gray-500">ÊÄªEpochÊï∞:</span> <span class="font-medium" x-text="recordDetail?.num_epochs || 'N/A'"></span></div>
                    <div><span class="text-gray-500">Â≠¶‰π†Áéá:</span> <span class="font-medium" x-text="recordDetail?.learning_rate || 'N/A'"></span></div>
                    <div><span class="text-gray-500">Â≠¶‰π†ÁéáË∞ÉÂ∫¶Âô®:</span> <span class="font-medium" x-text="recordDetail?.lr_scheduler || 'N/A'"></span></div>
                    <div><span class="text-gray-500">Batch Size:</span> <span class="font-medium" x-text="recordDetail?.train_batch_size || 'N/A'"></span></div>
                </div>
                <hr>
                <h4 class="font-bold text-green-700">ËÆ≠ÁªÉÁªìÊûú</h4>
                <div class="grid grid-cols-2 gap-4 text-sm">
                    <div><span class="text-gray-500">ÊúÄ‰Ω≥Epoch:</span> <span class="font-medium text-green-600" x-text="recordDetail?.best_epoch"></span></div>
                    <div><span class="text-gray-500">ÊúÄ‰Ω≥Loss:</span> <span class="font-medium text-green-600" x-text="recordDetail?.best_val_loss?.toFixed(10)"></span></div>
                    <div><span class="text-gray-500">ÊúÄÂ∑ÆLoss:</span> <span class="font-medium" x-text="recordDetail?.worst_val_loss?.toFixed(10)"></span></div>
                    <div><span class="text-gray-500">Âπ≥ÂùáLoss:</span> <span class="font-medium" x-text="recordDetail?.avg_val_loss?.toFixed(10)"></span></div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÂõæÁâáÈ¢ÑËßàÊ®°ÊÄÅÊ°Ü -->
    <div x-show="previewImage" x-cloak class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50" @click="previewImage = null">
        <div class="relative max-w-[90vw] max-h-[90vh]">
            <img :src="previewImage" class="max-w-full max-h-[90vh] object-contain" @click.stop>
            <button @click="previewImage = null" class="absolute top-4 right-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-colors">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
    </div>

    <!-- ÂÖ®Â±èÂõæÁâáÊü•ÁúãÂºπÁ™ó -->
    <div x-show="fullscreenImage" x-cloak 
         x-data="{ 
             scale: 1, 
             translateX: 0, 
             translateY: 0, 
             isDragging: false, 
             startX: 0, 
             startY: 0,
             showArrows: false,
             arrowTimer: null,
             handleWheel(e) {
                 e.preventDefault();
                 const delta = e.deltaY > 0 ? -0.1 : 0.1;
                 this.scale = Math.max(0.5, Math.min(5, this.scale + delta));
             },
             handleMouseDown(e) {
                 if (this.scale <= 1) return;
                 this.isDragging = true;
                 this.startX = e.clientX - this.translateX;
                 this.startY = e.clientY - this.translateY;
             },
             handleMouseMove(e) {
                 if (this.isDragging) {
                     this.translateX = e.clientX - this.startX;
                     this.translateY = e.clientY - this.startY;
                 }
             },
             handleMouseUp() {
                 this.isDragging = false;
             },
             resetView() {
                 this.scale = 1;
                 this.translateX = 0;
                 this.translateY = 0;
             },
            navigateFullscreen(direction) {
                if (!detailPair) return;

                // ÂΩìÂâçÂÖ®Â±è‰æßÔºö'left' Êàñ 'right'
                const side = fullscreenImageSide === 'right' ? 'right' : 'left';

                // ÂêëÂè≥Ôºö‰ºòÂÖàÂú®ÂΩìÂâçÁªÑÂÜÖ‰ªé left -> rightÔºåÂÜç‰ªé right Ë∑≥Âà∞‰∏ã‰∏ÄÁªÑÁöÑ left
                if (direction > 0) {
                    if (side === 'left') {
                        // Â¶ÇÊûúÊú¨ÁªÑÊúâÁõÆÊ†áÂõæÔºåÂÖàÂàáÊç¢Âà∞ÁõÆÊ†áÂõæ
                        if (detailPair.right && detailPair.right.path) {
                            fullscreenImageSide = 'right';
                            fullscreenImage = '/api/file/image?path=' + encodeURIComponent(detailPair.right.path);
                            this.resetView();
                            return;
                        }
                        // Â¶ÇÊûúÊ≤°ÊúâÁõÆÊ†áÂõæÔºåÁªßÁª≠Ëµ∞Âà∞‰∏ã‰∏ÄÁªÑ
                    }

                    // ÂΩìÂâç‰∏∫ right Êàñ left Ê≤°ÊúâÁõÆÊ†áÂõæ -> Ë∑≥Âà∞‰∏ã‰∏ÄÁªÑÂπ∂ÊòæÁ§∫ leftÔºàËã•Êó† left ÂàôÂõûÈÄÄÂà∞ rightÔºâ
                    const currentIndex = detailPairIndex;
                    const newIndex = currentIndex + 1;
                    if (newIndex >= 0 && newIndex < pairs.length) {
                        detailPair = { ...pairs[newIndex] };
                        fullscreenImageSide = 'left';
                        const newPair = pairs[newIndex];
                        if (newPair.left && newPair.left.path) {
                            fullscreenImage = '/api/file/image?path=' + encodeURIComponent(newPair.left.path);
                        } else if (newPair.right && newPair.right.path) {
                            fullscreenImageSide = 'right';
                            fullscreenImage = '/api/file/image?path=' + encodeURIComponent(newPair.right.path);
                        }
                        this.resetView();
                    }
                    return;
                }

                // ÂêëÂ∑¶Ôºö‰ºòÂÖàÂú®ÂΩìÂâçÁªÑÂÜÖ‰ªé right -> leftÔºåÂÜç‰ªé left Ë∑≥Âà∞‰∏ä‰∏ÄÁªÑÁöÑ right
                if (direction < 0) {
                    if (side === 'right') {
                        // Â¶ÇÊûúÊú¨ÁªÑÊúâÂéüÂõæÔºåÂÖàÂàáÊç¢Âà∞ÂéüÂõæ
                        if (detailPair.left && detailPair.left.path) {
                            fullscreenImageSide = 'left';
                            fullscreenImage = '/api/file/image?path=' + encodeURIComponent(detailPair.left.path);
                            this.resetView();
                            return;
                        }
                        // Â¶ÇÊûúÊ≤°ÊúâÂéüÂõæÔºåÁªßÁª≠Ëµ∞Âà∞‰∏ä‰∏ÄÁªÑ
                    }

                    // ÂΩìÂâç‰∏∫ left Êàñ right Ê≤°ÊúâÂéüÂõæ -> Ë∑≥Âà∞‰∏ä‰∏ÄÁªÑÂπ∂ÊòæÁ§∫ rightÔºàËã•Êó† right ÂàôÂõûÈÄÄÂà∞ leftÔºâ
                    const currentIndex = detailPairIndex;
                    const newIndex = currentIndex - 1;
                    if (newIndex >= 0 && newIndex < pairs.length) {
                        detailPair = { ...pairs[newIndex] };
                        fullscreenImageSide = 'right';
                        const newPair = pairs[newIndex];
                        if (newPair.right && newPair.right.path) {
                            fullscreenImage = '/api/file/image?path=' + encodeURIComponent(newPair.right.path);
                        } else if (newPair.left && newPair.left.path) {
                            fullscreenImageSide = 'left';
                            fullscreenImage = '/api/file/image?path=' + encodeURIComponent(newPair.left.path);
                        }
                        this.resetView();
                    }
                    return;
                }
            }
         }"
         x-init="$watch('fullscreenImage', () => resetView())"
         x-transition:enter="transition ease-out duration-200"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="transition ease-in duration-150"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         class="fixed inset-0 bg-black/95 flex items-center justify-center z-[100]" 
         @keydown.left.window="fullscreenImage && (showArrows = true, clearTimeout(arrowTimer), arrowTimer = setTimeout(() => showArrows = false, 1500), navigateFullscreen(-1))"
         @keydown.right.window="fullscreenImage && (showArrows = true, clearTimeout(arrowTimer), arrowTimer = setTimeout(() => showArrows = false, 1500), navigateFullscreen(1))"
         @keydown.escape.window="fullscreenImage = null"
         @mousemove="handleMouseMove($event)"
         @mouseup="handleMouseUp()"
         @mouseleave="handleMouseUp()"
         @mousedown.self.prevent="handleMouseDown($event)">
        <!-- Â∑¶ÁÆ≠Â§¥ÊåâÈíÆ -->
        <button @click.stop="navigateFullscreen(-1)" 
                x-show="showArrows && detailPairIndex > 0"
                x-transition:enter="transition ease-out duration-200"
                x-transition:enter-start="opacity-0 -translate-x-4"
                x-transition:enter-end="opacity-100 translate-x-0"
                x-transition:leave="transition ease-in duration-150"
                x-transition:leave-start="opacity-100 translate-x-0"
                x-transition:leave-end="opacity-0 -translate-x-4"
                class="absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/10 hover:bg-white/20 rounded-full shadow-lg flex items-center justify-center text-white hover:text-white transition-all z-10 backdrop-blur-sm">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
        </button>
        <!-- Âè≥ÁÆ≠Â§¥ÊåâÈíÆ -->
        <button @click.stop="navigateFullscreen(1)" 
                x-show="showArrows && detailPairIndex < pairs.length - 1"
                x-transition:enter="transition ease-out duration-200"
                x-transition:enter-start="opacity-0 translate-x-4"
                x-transition:enter-end="opacity-100 translate-x-0"
                x-transition:leave="transition ease-in duration-150"
                x-transition:leave-start="opacity-100 translate-x-0"
                x-transition:leave-end="opacity-0 translate-x-4"
                class="absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/10 hover:bg-white/20 rounded-full shadow-lg flex items-center justify-center text-white hover:text-white transition-all z-10 backdrop-blur-sm">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
        </button>
        <div class="relative w-full h-full flex items-center justify-center p-4 overflow-hidden">
            <img :src="fullscreenImage" 
                 class="max-w-full max-h-full object-contain transition-transform duration-100"
                 :class="isDragging ? 'cursor-grabbing' : (scale > 1 ? 'cursor-grab' : 'cursor-zoom-in')"
                 :style="'transform: scale(' + scale + ') translate(' + (translateX/scale) + 'px, ' + (translateY/scale) + 'px)'"
                 @click.stop
                 @wheel.prevent="handleWheel($event)"
                 @mousedown.prevent="handleMouseDown($event)">
            <!-- ÂÖ≥Èó≠ÊåâÈíÆ -->
            <button @click.stop="fullscreenImage = null" class="absolute top-6 right-6 w-12 h-12 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-colors backdrop-blur-sm">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
            <!-- Áº©ÊîæÊØî‰æãÊòæÁ§∫ -->
            <div class="absolute top-6 left-6 px-3 py-1.5 bg-white/10 rounded-full text-white/80 text-sm backdrop-blur-sm">
                <span x-text="Math.round(scale * 100) + '%'"></span>
            </div>
            <!-- ÊèêÁ§∫ÊñáÂ≠ó -->
            <div class="absolute bottom-6 left-1/2 -translate-x-1/2 text-white/60 text-sm">
                ÊªöËΩÆÁº©Êîæ ¬∑ ÊãñÊãΩÁßªÂä® ¬∑ Â∑¶Âè≥ÊñπÂêëÈîÆÂàáÊç¢ ¬∑ ÁÇπÂáªÂè≥‰∏äËßíÂÖ≥Èó≠
            </div>
            <!-- ÂõæÁâáÂ∫èÂè∑ÊòæÁ§∫ -->
            <div x-show="detailPair" class="absolute top-6 left-1/2 -translate-x-1/2 px-3 py-1.5 bg-white/10 rounded-full text-white/80 text-sm backdrop-blur-sm">
                <span x-text="(detailPairIndex + 1) + ' / ' + pairs.length"></span>
            </div>
            <!-- ÈáçÁΩÆÊåâÈíÆ -->
            <button x-show="scale !== 1" @click.stop="resetView()" class="absolute bottom-6 right-6 px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-full text-white/80 text-sm backdrop-blur-sm transition-colors">
                ÈáçÁΩÆËßÜÂõæ
            </button>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
